import{r,j as a,b$ as E,aU as Q,bC as S,B as X,D as Y,av as Z,b_ as ee,w as te,u as ae,al as w,aa as ne,T as se,as as I,aV as P,l as re,c as R,e as k,F as $,bo as F,aH as V,i as D,ar as M,by as z,o as A,bm as B,ad as N,ae as O}from"./index-6b9b4714.js";function q(t){var e,s,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(s=q(t[e]))&&(n&&(n+=" "),n+=s);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function oe(){for(var t,e,s=0,n="";s<arguments.length;)(t=arguments[s++])&&(e=q(t))&&(n&&(n+=" "),n+=e);return n}const W=r.createContext(null);function le(){const[t,e]=r.useState(null);return r.useEffect(()=>{e(`mui-p-${Math.round(Math.random()*1e5)}`)},[]),t}function ie(t){const{children:e,value:s}=t,n=le(),x=r.useMemo(()=>({idPrefix:n,value:s}),[n,s]);return a.jsx(W.Provider,{value:x,children:e})}function G(){return r.useContext(W)}function H(t,e){const{idPrefix:s}=t;return s===null?null:`${t.idPrefix}-P-${e}`}function K(t,e){const{idPrefix:s}=t;return s===null?null:`${t.idPrefix}-T-${e}`}const ce=["children"],de=r.forwardRef(function(e,s){const{children:n}=e,x=E(e,ce),u=G();if(u===null)throw new TypeError("No TabContext provided");const i=r.Children.map(n,m=>r.isValidElement(m)?r.cloneElement(m,{"aria-controls":H(u,m.props.value),id:K(u,m.props.value)}):null);return a.jsx(Q,S({},x,{ref:s,value:u.value,children:i}))}),ue=de;function me(t){return X("MuiTabPanel",t)}Y("MuiTabPanel",["root"]);const pe=["children","className","value"],xe=t=>{const{classes:e}=t;return te({root:["root"]},me,e)},he=Z("div",{name:"MuiTabPanel",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({padding:t.spacing(3)})),fe=r.forwardRef(function(e,s){const n=ee({props:e,name:"MuiTabPanel"}),{children:x,className:u,value:i}=n,m=E(n,pe),h=S({},n),f=xe(h),p=G();if(p===null)throw new TypeError("No TabContext provided");const g=H(p,i),y=K(p,i);return a.jsx(he,S({"aria-labelledby":y,className:oe(f.root,u),hidden:i!==p.value,id:g,ref:s,role:"tabpanel",ownerState:h},m,{children:i===p.value&&x}))}),L=fe;function ge({businessProfile:t,isManageBusiness:e}){var h,f;const{initialize:s}=ae();w();const n=(h=t==null?void 0:t.Interior_Exterior_Picture_Links)==null?void 0:h.filter(p=>p.type==="Interior"),x=(f=t==null?void 0:t.Interior_Exterior_Picture_Links)==null?void 0:f.filter(p=>p.type==="Exterior"),[u,i]=ne.useState("2"),m=(p,g)=>{i(g)};return a.jsxs(a.Fragment,{children:[a.jsx(se,{variant:"h4",sx:{my:5},children:"Gallery"}),a.jsxs(ie,{value:u,children:[a.jsx(I,{sx:{borderBottom:1,borderColor:"divider"},children:a.jsxs(ue,{onChange:m,"aria-label":"lab API tabs example",children:[a.jsx(P,{label:"Interior",value:"2"}),a.jsx(P,{label:"Exterior",value:"3"})]})}),a.jsx(L,{value:"2",children:a.jsx(be,{isManageBusiness:e,products:n,initialize:s})}),a.jsx(L,{value:"3",children:a.jsx(ye,{isManageBusiness:e,products:x,initialize:s})})]})]})}ge.propTypes={gallery:re.array};const be=({isManageBusiness:t,products:e,initialize:s})=>{const{enqueueSnackbar:n}=w(),x=R().shape({}),u={},i=k({resolver:A(x),defaultValues:u}),{reset:m,setValue:h,handleSubmit:f,formState:{isSubmitting:p}}=i,g=f(async o=>{}),[y,v]=r.useState(!1),[j,b]=r.useState(!1),[T,C]=r.useState(null),U=async()=>{var o,c;try{b(!0);const l=new FormData;l.append("file",T),l.append("upload_preset","bymtctem");const d=await B.post("https://api.cloudinary.com/v1_1/dfznwn1fr/image/upload",l),{data:J}=await N.post(O.uploadBusinessImage,{imageUrl:(o=d==null?void 0:d.data)==null?void 0:o.url,type:"Interior",imageKey:(c=d==null?void 0:d.data)==null?void 0:c.public_id});s(),m(),n("Uploaded successfully"),b(!1),v(!1)}catch(l){console.log(l),b(!1)}},_=r.useCallback(o=>{const c=o[0],l=Object.assign(c,{preview:URL.createObjectURL(c)});c&&(h("business_cover_image",l,{shouldValidate:!0}),C(l),v(!0))},[h]);return a.jsxs(I,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",md:"repeat(4, 1fr)"},children:[t&&(e==null?void 0:e.length)<4&&a.jsxs($,{methods:i,onSubmit:g,children:[a.jsx(F,{isProdcut:!0,onDrop:_,name:"business_cover_image",maxSize:3145728}),y&&a.jsx(V,{justifyContent:"center",children:a.jsx(D,{color:"inherit",type:"button",variant:"contained",loading:j,sx:{mt:2,minWidth:150,mx:"auto"},onClick:U,children:"Upload"})})]}),e==null?void 0:e.map(o=>a.jsx(M,{sx:{cursor:"pointer",color:"common.white",position:"relative"},style:{aspectRatio:"1/1"},children:a.jsx(z,{alt:"gallery",height:"100%",width:"100%",src:o.image_url})},o.id))]})},ye=({isManageBusiness:t,products:e,initialize:s})=>{const{enqueueSnackbar:n}=w(),x=R().shape({}),u={},i=k({resolver:A(x),defaultValues:u}),{reset:m,setValue:h,handleSubmit:f,formState:{isSubmitting:p}}=i,g=f(async o=>{}),[y,v]=r.useState(!1),[j,b]=r.useState(!1),[T,C]=r.useState(null),U=async()=>{var o,c;try{b(!0);const l=new FormData;l.append("file",T),l.append("upload_preset","bymtctem");const d=await B.post("https://api.cloudinary.com/v1_1/dfznwn1fr/image/upload",l),{data:J}=await N.post(O.uploadBusinessImage,{imageUrl:(o=d==null?void 0:d.data)==null?void 0:o.url,type:"Exterior",imageKey:(c=d==null?void 0:d.data)==null?void 0:c.public_id});s(),m(),n("Uploaded successfully"),b(!1),v(!1)}catch(l){console.log(l),b(!1)}},_=r.useCallback(o=>{const c=o[0],l=Object.assign(c,{preview:URL.createObjectURL(c)});c&&(h("business_cover_image",l,{shouldValidate:!0}),C(l),v(!0))},[h]);return a.jsxs(I,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",md:"repeat(4, 1fr)"},children:[t&&(e==null?void 0:e.length)<4&&a.jsxs($,{methods:i,onSubmit:g,children:[a.jsx(F,{isProdcut:!0,onDrop:_,name:"business_cover_image",maxSize:3145728}),y&&a.jsx(V,{justifyContent:"center",children:a.jsx(D,{color:"inherit",type:"button",variant:"contained",loading:j,sx:{mt:2,minWidth:150,mx:"auto"},onClick:U,children:"Upload"})})]}),e==null?void 0:e.map(o=>a.jsx(M,{sx:{cursor:"pointer",color:"common.white",position:"relative"},style:{aspectRatio:"1/1"},children:a.jsx(z,{alt:"gallery",height:"100%",src:o.image_url})},o.id))]})};export{ge as P};
