import{l as o,j as e,at as k,S as c,T as P,b0 as K,as as x,g as Q,h as E,L as ie,ar as M,b1 as F,b2 as S,aX as X,k as Y,aR as Z,b6 as xe,R as de,aT as A,b8 as he,aI as I,b9 as ue,ba as je,bb as be,aA as ee,bc as ye,r as h,aD as ae,aG as B,ad as w,aP as pe,aQ as f,aS as U,bd as q,i as J,b5 as me,aB as ge,u as fe,a as ve,p as z,aE as Ce,aF as Se,aU as De,au as Te,aV as ke,aW as Ee,aY as Pe,aZ as Ie,a_ as we,a$ as Ne,aK as Re,ae as Oe}from"./index-6b9b4714.js";function te({customer:a,delivery:l,payment:d,shippingAddress:t,isOrder:i,isMyOrder:y}){const s=e.jsxs(e.Fragment,{children:[e.jsx(k,{title:e.jsxs(c,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(P,{variant:"h6",component:"div",children:"Customer Info"}),y&&e.jsxs(P,{variant:"h6",component:"div",sx:{fontWeight:700,ml:2},children:["OTP - ",d==null?void 0:d.deliveryOtp]})]})}),e.jsxs(c,{direction:"row",sx:{p:3},children:[e.jsx(K,{alt:a==null?void 0:a.full_name,src:a==null?void 0:a.avatarUrl,sx:{width:48,height:48,mr:2}}),e.jsxs(c,{spacing:.5,alignItems:"flex-start",sx:{typography:"body2"},children:[e.jsx(P,{variant:"subtitle2",children:a==null?void 0:a.full_name}),e.jsx(x,{sx:{color:"text.secondary"},children:a==null?void 0:a.Contact_no})]})]})]});e.Fragment,k,Q,E,c,c,x,l==null||l.shipBy,c,x,l==null||l.speedy,c,x,ie,l==null||l.trackingNumber;const r=e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"Shipping"}),e.jsxs(c,{spacing:1.5,sx:{p:3,typography:"body2"},children:[e.jsxs(c,{direction:"row",children:[e.jsx(x,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Address"}),`${t!=null&&t.address_line_1?t==null?void 0:t.address_line_1:""}  ${t!=null&&t.address_line_2?t==null?void 0:t.address_line_2:""}  ${t!=null&&t.city?t==null?void 0:t.city:""}  ${t==null?void 0:t.state}  ${t==null?void 0:t.country}  ${t==null?void 0:t.pincode}`]}),e.jsxs(c,{direction:"row",children:[e.jsx(x,{component:"span",sx:{color:"text.secondary",width:120,flexShrink:0},children:"Phone number"}),a==null?void 0:a.Contact_no]})]})]}),b=e.jsxs(e.Fragment,{children:[e.jsx(k,{title:"Payment"}),e.jsxs(c,{direction:"row",alignItems:"center",sx:{p:3,typography:"body2"},children:[e.jsx(x,{component:"span",sx:{color:"text.secondary",flexGrow:1},children:"Transaction Id"}),d==null?void 0:d.orderId]})]});return e.jsxs(M,{children:[s,e.jsx(F,{sx:{borderStyle:"dashed"}}),e.jsx(F,{sx:{borderStyle:"dashed"}}),r,e.jsx(F,{sx:{borderStyle:"dashed"}}),b]})}te.propTypes={customer:o.object,delivery:o.object,payment:o.object,shippingAddress:o.object,isMyOrder:o.bool,isOrder:o.bool};function ne({items:a,taxes:l,shipping:d,discount:t,subTotal:i,totalAmount:y}){const s=e.jsxs(c,{spacing:2,alignItems:"flex-end",sx:{my:3,textAlign:"right",typography:"body2"},children:[e.jsxs(c,{direction:"row",children:[e.jsx(x,{sx:{color:"text.secondary"},children:"Subtotal"}),e.jsx(x,{sx:{width:160,typography:"subtitle2"},children:S(i)||"-"})]}),e.jsxs(c,{direction:"row",children:[e.jsx(x,{sx:{color:"text.secondary"},children:"Shipping"}),e.jsx(x,{sx:{width:160,...d&&{color:"error.main"}},children:d?`- ${S(d)}`:"-"})]}),e.jsxs(c,{direction:"row",children:[e.jsx(x,{sx:{color:"text.secondary"},children:"Discount"}),e.jsx(x,{sx:{width:160,...t&&{color:"error.main"}},children:t?`- ${S(t)}`:"-"})]}),e.jsxs(c,{direction:"row",children:[e.jsx(x,{sx:{color:"text.secondary"},children:"Taxes"}),e.jsx(x,{sx:{width:160},children:l?S(l):"-"})]}),e.jsxs(c,{direction:"row",sx:{typography:"subtitle1"},children:[e.jsx(x,{children:"Total"}),e.jsx(x,{sx:{width:160},children:S(y)||"-"})]})]});return e.jsxs(M,{children:[e.jsx(k,{title:"Details"}),e.jsxs(c,{sx:{px:3},children:[e.jsx(X,{children:a==null?void 0:a.map(r=>{var b,j,p,u,g;return e.jsxs(c,{as:Y,to:`/product/${(b=r==null?void 0:r.product)==null?void 0:b.id}`,direction:"row",alignItems:"center",sx:{py:3,minWidth:640,borderBottom:D=>`dashed 2px ${D.palette.background.neutral}`,textDecoration:"none",color:"inherit"},children:[e.jsx(K,{src:(p=(j=r==null?void 0:r.product)==null?void 0:j.pictures[0])==null?void 0:p.image_url,variant:"rounded",sx:{width:48,height:48,mr:2}}),e.jsx(Z,{primary:(u=r==null?void 0:r.product)==null?void 0:u.title,secondary:(g=r==null?void 0:r.product)==null?void 0:g.description,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled",mt:.5}}),e.jsxs(x,{sx:{typography:"body2"},children:["x",r.quantity]}),e.jsx(x,{sx:{width:110,textAlign:"right",typography:"subtitle2"},children:S(r.price)})]},r.id)})}),s]})]})}ne.propTypes={discount:o.number,items:o.array,shipping:o.number,subTotal:o.number,taxes:o.number,totalAmount:o.number};function se({status:a,backLink:l,createdAt:d,orderNumber:t,statusOptions:i,onChangeStatus:y,isMyOrder:s,isOrder:r}){const b=xe();return e.jsxs(e.Fragment,{children:[e.jsxs(c,{spacing:3,direction:{xs:"column",md:"row"},sx:{mb:{xs:3,md:5}},justifyContent:"space-between",children:[e.jsxs(c,{spacing:1,direction:"row",alignItems:"flex-start",children:[e.jsx(Q,{component:de,href:l,children:e.jsx(E,{icon:"eva:arrow-ios-back-fill"})}),e.jsxs(c,{spacing:.5,children:[e.jsxs(c,{spacing:1,direction:"row",alignItems:"center",children:[e.jsxs(P,{variant:"h4",children:[" Order ",t," "]}),e.jsx(A,{variant:"soft",color:a==="completed"&&"success"||a==="pending"&&"warning"||a==="cancelled"&&"error"||"default",children:a})]}),e.jsx(P,{variant:"body2",sx:{color:"text.disabled"},children:he(d)})]})]}),e.jsxs(c,{direction:"column",sx:{gap:2},children:[e.jsxs(c,{flexGrow:1,spacing:1.5,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[r&&e.jsx(I,{color:"inherit",variant:"outlined",endIcon:e.jsx(E,{icon:"eva:arrow-ios-downward-fill"}),onClick:b.onOpen,sx:{textTransform:"capitalize"},children:a}),e.jsx(I,{color:"inherit",variant:"outlined",startIcon:e.jsx(E,{icon:"solar:printer-minimalistic-bold"}),children:"Print"}),r&&e.jsx(I,{color:"inherit",variant:"contained",startIcon:e.jsx(E,{icon:"solar:pen-bold"}),children:"Edit"})]}),a==="DELIVERED"&&e.jsx(ue,{placeholder:"Enter Delivery Otp"})]})]}),e.jsx(je,{open:b.open,onClose:b.onClose,arrow:"top-right",sx:{width:140},children:i.map(j=>e.jsx(be,{selected:j.value===a,onClick:()=>{b.onClose(),y(j.value)},children:j.label},j.value))})]})}se.propTypes={backLink:o.string,createdAt:o.instanceOf(Date),onChangeStatus:o.func,orderNumber:o.string,status:o.string,statusOptions:o.array,isMyOrder:o.bool,isOrder:o.bool};const _e=[{value:"PENDING",label:"Pending"},{value:"PROCESSING",label:"Processing"},{value:"APPROVED",label:"Approved"},{value:"SHIPPED",label:"Shipped"},{value:"DELIVERED",label:"Delivered"},{value:"CANCELLED",label:"Cancelled"},{value:"RETURNED",label:"Returned"},{value:"REFUNDED",label:"Refunded"},{value:"ON_HOLD",label:"On hold"}];function $e({id:a,isService:l,isMyService:d}){const t=ee(),i=ye.filter(u=>u.id===a)[0],y=h.useCallback(u=>{p(u)},[]),[s,r]=h.useState(),b=async()=>{try{const{data:u}=await w.get(`/api/member/ecommerce/order/single/${a}`);r(u==null?void 0:u.data)}catch(u){console.log(u)}};h.useEffect(()=>{b()},[]);const[j,p]=h.useState("PENDING");return e.jsxs(ae,{maxWidth:t.themeStretch?!1:"lg",children:[e.jsx(se,{backLink:`${l?"/service-history":"/my-service"}`,orderNumber:s==null?void 0:s.orderId,createdAt:s==null?void 0:s.orderDate,status:j,onChangeStatus:y,statusOptions:_e,isMyService:d,isService:l}),e.jsxs(B,{container:!0,spacing:3,children:[e.jsx(B,{xs:12,md:8,children:e.jsx(c,{spacing:3,direction:{xs:"column-reverse",md:"column"},children:e.jsx(ne,{items:s==null?void 0:s.products,taxes:i==null?void 0:i.taxes,shipping:i==null?void 0:i.shipping,discount:i==null?void 0:i.discount,subTotal:(s==null?void 0:s.amount)/100,totalAmount:(s==null?void 0:s.amount)/100})})}),e.jsx(B,{xs:12,md:4,children:e.jsx(te,{customer:s==null?void 0:s.buyer,delivery:i==null?void 0:i.delivery,payment:s,shippingAddress:s==null?void 0:s.address,isService:l,isMyService:d})})]})]})}$e.propTypes={id:o.string,isService:o.bool,isMyService:o.bool};function oe({row:a,onViewRow:l,isService:d,isMyService:t,buyer:i,seller:y,getService:s}){const[r,b]=h.useState(!1),[j,p]=h.useState(!1),[u,g]=h.useState(!1),D=()=>{p(!0)},N=()=>{p(!1)};function _(T){return T==="APPROVED"?"success":T==="REJECTED"?"error":"warning"}const $=async T=>{try{const v=await w.patch(`/api/member/ecommerce/service/booking/${a.bookingId}/status`,{status:T});v.status===200&&(p(!1),g(!1),s(),me(v.data.message,{variant:"success"}))}catch(v){console.log(v)}},L=e.jsxs(pe,{hover:!0,to:"#",as:Y,sx:{textDecoration:"none"},children:[e.jsx(f,{children:e.jsx(x,{onClick:l,sx:{cursor:"pointer"},children:`${a==null?void 0:a.title}`})}),e.jsx(f,{children:e.jsx(x,{onClick:l,sx:{cursor:"pointer"},children:`â‚¹ ${a==null?void 0:a.price}`})}),e.jsx(f,{children:e.jsx(Z,{primary:U(new Date((a==null?void 0:a.created_at)||""),"dd MMM yyyy"),secondary:U(new Date((a==null?void 0:a.created_at)||""),"p"),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsx(f,{children:e.jsx(x,{onClick:l,sx:{cursor:"pointer"},children:d?i.full_name:y.bussiness_name})}),d&&e.jsx(f,{children:e.jsx(x,{onClick:l,sx:{cursor:"pointer"},children:`${i==null?void 0:i.Contact_no}`})}),e.jsx(f,{children:e.jsx(A,{variant:"soft",color:_(a.status),children:a.status})}),d&&e.jsxs(f,{children:[e.jsx(I,{disabled:a.status!=="PENDING",color:"success",variant:"contained",sx:{mr:2},onClick:D,children:"Approve"}),e.jsx(q,{open:j,onClose:N,title:"Are you sure to approve?",content:e.jsx(e.Fragment,{}),action:e.jsx(J,{loading:r,variant:"contained",color:"success",onClick:()=>$("APPROVED"),children:"Approve"})}),e.jsx(I,{disabled:a.status!=="PENDING",onClick:()=>g(!0),color:"error",variant:"contained",children:"Reject"}),e.jsx(q,{open:u,onClose:()=>{g(!1)},title:"Are you sure to reject?",action:e.jsx(J,{loading:r,variant:"contained",color:"error",onClick:()=>$("REJECTED"),children:"Reject"})})]})]});return e.jsx(e.Fragment,{children:L})}oe.propTypes={onViewRow:o.func,row:o.object,buyer:o.object,seller:o.object,isMyService:o.bool,isService:o.bool,getService:o.func};const Le=[{value:"all",label:"All"},{value:"PENDING",label:"Pending"},{value:"APPROVED",label:"Deal"},{value:"REJECTED",label:"Rejected"}],Fe={name:"",status:"all"};function Be({isService:a,isMyService:l}){var V,H;const d=[{id:"serviceName",label:"Service Name"},{id:"amount",label:"Amount"},{id:"requestDate",label:"Request Date"},...a?[{id:"buyerName",label:"Buyer Name"},{id:"buyercontact",label:"Buyer ContactNo"}]:[],...l?[{id:"businessName",label:"Business Name"}]:[],{id:"status",label:"Status",width:110},...a?[{id:"action",label:"Action"}]:[]],t=ge({}),[i,y]=h.useState([]),{user:s}=fe(),[r,b]=h.useState("all"),j=h.useCallback(async()=>{try{const{data:n}=await w.get(`/api/member/ecommerce/service/booking?status=${r}`);y(n==null?void 0:n.data)}catch(n){console.log(n)}},[r]),p=ee(),u=ve(),[g,D]=h.useState(Fe),N=h.useCallback((n,C)=>{t.onResetPage(),D(m=>({...m,[n]:C}))},[t]);h.useCallback(n=>{console.log("to the view row",n),u.push(z.dashboard.service.details(n))},[u]);const _=h.useCallback((n,C)=>{N("status",C)},[N]),[$,L]=h.useState([]),[T,v]=h.useState(0),re=async()=>{var n,C;try{const{data:m}=await w.get(Oe.payout.history);v((n=m==null?void 0:m.data)==null?void 0:n.totalPages),L((C=m==null?void 0:m.data)==null?void 0:C.data)}catch(m){console.log(m)}};h.useEffect(()=>{re()},[]);const[le,ce]=h.useState([]),G=h.useCallback(async()=>{try{const{data:n}=await w.get(`api/member/ecommerce/service/me?status=${r}`);ce(n==null?void 0:n.data)}catch(n){console.log(n)}},[r]);h.useEffect(()=>{a&&j(),l&&G()},[a,l,G,j]);const W=()=>a?i:le;let R,O;return a?(R="Service",O="Service"):l?(R="My Service",O="My Service"):(R="Withdrawal",O="Withdrawal"),e.jsxs(e.Fragment,{children:[e.jsx(Ce,{}),e.jsxs(ae,{maxWidth:p.themeStretch?!1:"lg",children:[e.jsx(Se,{heading:R,links:[{name:"Dashboard",href:z.findBusiness},{name:O}],sx:{mb:{xs:3,md:5}}}),s!=null&&s.is_premium?e.jsxs(M,{children:[e.jsx(De,{value:g.status,onChange:_,sx:{px:2.5,boxShadow:n=>`inset 0 -2px 0 0 ${Te(n.palette.grey[500],.08)}`},children:Le.map(n=>e.jsx(ke,{onClick:()=>b(n.value),iconPosition:"end",value:n.value,label:n.label},n.value))}),e.jsx(Ee,{sx:{position:"relative",overflow:"unset"},children:e.jsx(X,{children:e.jsxs(Pe,{size:t.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(Ie,{headLabel:d}),e.jsxs(we,{children:[(V=W())==null?void 0:V.map(n=>e.jsx(oe,{isService:a,isMyService:l,row:{...n.service,status:n.status,bookingId:n.id},getService:j,buyer:n.buyer,seller:n.seller},n.id)),e.jsx(Ne,{notFound:!((H=W())!=null&&H.length)})]})]})})})]}):e.jsx(Re,{})]})]})}Be.propTypes={isService:o.bool,isMyService:o.bool};export{Be as O,$e as a};
