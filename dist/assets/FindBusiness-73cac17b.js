import{aA as E,r as n,bp as Q,u as G,c as b,e as J,ad as p,j as t,aD as B,aF as U,p as v,S as w,bq as X,aK as Y,o as Z,F as ee,A as se,ak as x,f as te,i as ne,br as ie,bs as ae,ae as re,W as le}from"./index-6b9b4714.js";import{E as oe}from"./ecommerce-new-products-976091cd.js";import{S as ce,C as ue}from"./state-city-7811e25e.js";import"./CardContent-9cce7f0e.js";const me=()=>{var S,f,F;const c=E(),{promotions:L}=n.useContext(Q),{user:u}=G(),[h,m]=n.useState(!1),[O,V]=n.useState(null),[_,q]=n.useState([]),A=async()=>{var e;try{const{data:s}=await p.get("/api/admin/business/type?page=1&pageSize=1000"),o=(e=s==null?void 0:s.data)==null?void 0:e.map(l=>({value:l.type,label:l.type}));q(o)}catch(s){console.log(s)}};n.useEffect(()=>{A()},[]);const k=e=>{V(e==null?void 0:e.name),d.setValue("state",e,{shouldValidate:!0})},$=b().shape({state:b().required("State is required"),city:b().required("City is required")}),P={pincode_or_area:""},d=J({resolver:Z($),defaultValues:P}),{handleSubmit:D,formState:{isSubmitting:K}}=d,M=D(async e=>{var s,o,l,T,C;try{y(""),m(!0);const a=await p.post(`/api/member/business/search?businessType=${((s=e==null?void 0:e.bussinessType)==null?void 0:s.value)!==void 0?(o=e==null?void 0:e.bussinessType)==null?void 0:o.value:""}&state=${(l=e==null?void 0:e.state)==null?void 0:l.value}&city=${(T=e==null?void 0:e.city)==null?void 0:T.value}&pincode_or_area=${e==null?void 0:e.pincode_or_area}`);H((C=a==null?void 0:a.data)==null?void 0:C.data),m(!1)}catch(a){console.error(a),y(typeof a=="string"?a:a.message),m(!1)}}),[g,y]=n.useState(""),N=t.jsxs(ee,{methods:d,onSubmit:M,children:[!!g&&t.jsx(se,{sx:{mb:2},severity:"error",children:g}),t.jsxs(w,{justifyContent:"space-between",direction:{xs:"column",sm:"row"},children:[t.jsx(x,{sx:{m:1,width:"100%"},name:"bussinessType",label:"Catergory",options:_,getOptionLabel:e=>e.label,isOptionEqualToValue:(e,s)=>e.label===s.value,renderOption:(e,s)=>n.createElement("li",{...e,key:s.label},s.label)}),t.jsx(x,{sx:{m:1,width:"100%"},name:"state",label:"State",options:ce,getOptionLabel:e=>e.label,isOptionEqualToValue:(e,s)=>e.label===s.label,renderOption:(e,s)=>n.createElement("li",{...e,key:s.label},s.label),onChange:(e,s)=>k(s)}),t.jsx(x,{sx:{m:1,width:"100%"},name:"city",label:"City",options:ue[O]||[],getOptionLabel:e=>e.label,isOptionEqualToValue:(e,s)=>e.label===s.value,renderOption:(e,s)=>n.createElement("li",{...e,key:s.label},s.label)}),t.jsx(te,{sx:{m:1},name:"pincode_or_area",label:"Area/Pincode"}),t.jsx(ne,{sx:{m:1},style:{width:"50%",height:"50px"},type:"submit",variant:"contained",loading:K,children:"Search"})]})]}),W=t.jsx(ie,{filled:!0,title:"No Data",sx:{py:10}}),[i,H]=n.useState(null),R=async()=>{const{data:e}=await p.get(re.business.topRated);return e},z=()=>ae("topRatedBusiness",R,{staleTime:6e4,cacheTime:36e5}),{data:r,error:be,isLoading:j}=z(),I=i!==null?!(i!=null&&i.length):!(i!=null&&i.length)&&!((f=(S=r==null?void 0:r.data)==null?void 0:S.result)!=null&&f.length);return t.jsxs(B,{maxWidth:c.themeStretch?!1:"lg",sx:{mb:15},children:[t.jsx(U,{heading:"Find Business",links:[{name:"Dashboard",href:v.findBusiness},{name:"Find Business",href:v.findBusiness}],sx:{mb:{xs:3,md:5}}}),u!=null&&u.is_premium?t.jsxs(t.Fragment,{children:[t.jsx(oe,{list:L}),t.jsx(w,{spacing:2.5,sx:{mb:{xs:3,md:5},mt:{xs:3,md:5}},children:N}),!j&&!h&&I&&W,t.jsx(X,{products:i||((F=r==null?void 0:r.data)==null?void 0:F.result)||[],loading:h&&j})]}):t.jsx(Y,{})]})},de=me;function ye(){const c=E();return t.jsxs(t.Fragment,{children:[t.jsx(le,{children:t.jsx("title",{children:" Find business | Return2Success"})}),t.jsx(B,{maxWidth:c.themeStretch?!1:"lg",children:t.jsx(de,{})})]})}export{ye as default};
