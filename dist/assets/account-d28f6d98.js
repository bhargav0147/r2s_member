import{al as Se,j as o,aG as ae,u as fe,c as Z,d as k,e as ge,ad as K,ae as ee,r as D,F as ve,ar as ne,T as je,as as ie,ak as we,f as N,S as U,i as le,o as Ee,A as ui,b as pi,ac as mi,I as ue,g as Qe,h as X,aa as Fe,aT as fi,bk as Wt,bl as gi,b0 as wt,ah as jt,aL as Xt,aI as qt,bm as at,bn as vi,l as bi,bo as xi,aA as yi,aD as wi,aF as ji,p as Ct,aU as Ci,aV as Si,aK as Ei,W as _i}from"./index-6b9b4714.js";import{P as Ti}from"./profile-gallery-d6a77aae.js";import{S as Ut,C as Vt}from"./state-city-7811e25e.js";import{t as St}from"./bussines-5450c0fe.js";function Di({personalAdress:a,businessAddress:e}){const{enqueueSnackbar:i}=Se();return o.jsxs(ae,{container:!0,spacing:3,children:[o.jsx(ae,{xs:12,lg:6,md:12,children:o.jsx(Oi,{businessAddress:e,enqueueSnackbar:i})}),o.jsx(ae,{xs:12,lg:6,md:12,children:o.jsx(Mi,{personalAdress:a,enqueueSnackbar:i})})]})}const Oi=({businessAddress:a,enqueueSnackbar:e})=>{var c,g,x,C,w,S,T,M;const{initialize:i}=fe(),t=Z().shape({state:Z().required("State is required"),city:Z().required("City is required"),pincode:k().required("Pin code is required"),area:k().required("Area is required"),address_line_1:k().required("Primary address is required")}),n={state:{value:(c=a[0])==null?void 0:c.state,label:(g=a[0])==null?void 0:g.state},city:{value:(x=a[0])==null?void 0:x.city,label:(C=a[0])==null?void 0:C.city},pincode:((w=a[0])==null?void 0:w.pincode)||"",area:((S=a[0])==null?void 0:S.area)||"",address_line_1:((T=a[0])==null?void 0:T.address_line_1)||"",address_line_2:((M=a[0])==null?void 0:M.address_line_2)||"",country:"India"},r=ge({resolver:Ee(t),defaultValues:n}),{handleSubmit:s,formState:{isSubmitting:h}}=r,p=s(async v=>{var E,m,f;try{const y=await K.put(ee.updateBusiness,{address:{address_line_1:v==null?void 0:v.address_line_1,address_line_2:v==null?void 0:v.address_line_2,state:(E=v==null?void 0:v.state)==null?void 0:E.value,city:(m=v==null?void 0:v.city)==null?void 0:m.value,pincode:v==null?void 0:v.pincode,country:v==null?void 0:v.country,area:v==null?void 0:v.area}});i(),(f=y==null?void 0:y.data)!=null&&f.success&&e("Updated successfully")}catch(y){console.error(y),e("Error while updating",{variant:"error"})}}),[d,l]=D.useState(null),u=v=>{console.log(v),l(v==null?void 0:v.name),r.setValue("state",v,{shouldValidate:!0})};return o.jsx(ve,{methods:r,onSubmit:p,children:o.jsxs(ne,{sx:{p:3},children:[o.jsx(je,{variant:"h4",sx:{mb:2},gutterBottom:!0,children:"Business Address"}),o.jsxs(ie,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[o.jsx(we,{name:"state",label:"State",options:Ut,getOptionLabel:v=>v.label,isOptionEqualToValue:(v,E)=>v.label===E.label,renderOption:(v,E)=>D.createElement("li",{...v,key:E.label},E.label),onChange:(v,E)=>u(E)}),o.jsx(we,{name:"city",label:"City",options:Vt[d]||[],getOptionLabel:v=>v.label,isOptionEqualToValue:(v,E)=>v.label===E.value,renderOption:(v,E)=>D.createElement("li",{...v,key:E.label},E.label)}),o.jsx(N,{name:"pincode",label:"Pincode"}),o.jsx(N,{name:"area",label:"Area"})]}),o.jsxs(U,{spacing:3,alignItems:"flex-end",sx:{mt:3},children:[o.jsx(N,{name:"address_line_1",multiline:!0,rows:4,label:"Primary Address"}),o.jsx(N,{name:"address_line_2",multiline:!0,rows:4,label:"Secondary Address"}),o.jsx(le,{type:"submit",variant:"contained",loading:h,children:"Save Changes"})]})]})})},Mi=({personalAdress:a,enqueueSnackbar:e})=>{const{initialize:i}=fe(),t=Z().shape({state:Z().required("State is required"),city:Z().required("City is required"),pincode:k().required("Pin code is required"),address_line_1:k().required("Primary address is required")}),n={state:{value:a==null?void 0:a.state,label:a==null?void 0:a.state},city:{value:a==null?void 0:a.city,label:a==null?void 0:a.city},pincode:(a==null?void 0:a.pincode)||"",address_line_1:(a==null?void 0:a.address_line_1)||"",address_line_2:(a==null?void 0:a.address_line_2)||"",country:"India"},r=ge({resolver:Ee(t),defaultValues:n}),{handleSubmit:s,formState:{isSubmitting:h}}=r,p=s(async c=>{var g,x,C;try{const w=await K.put(ee.updateSetting,{address:{address_line_1:c==null?void 0:c.address_line_1,address_line_2:c==null?void 0:c.address_line_2,state:(g=c==null?void 0:c.state)==null?void 0:g.value,city:(x=c==null?void 0:c.city)==null?void 0:x.value,pincode:c==null?void 0:c.pincode,country:c==null?void 0:c.country}});i(),(C=w==null?void 0:w.data)!=null&&C.success&&e("Updated successfully")}catch(w){console.error(w),e("Error while updating",{variant:"error"})}}),[d,l]=D.useState(null),u=c=>{console.log(c),l(c==null?void 0:c.name),r.setValue("state",c,{shouldValidate:!0})};return o.jsx(ve,{methods:r,onSubmit:p,children:o.jsxs(ne,{sx:{p:3},children:[o.jsx(je,{variant:"h4",sx:{mb:2},gutterBottom:!0,children:"Personal Address"}),o.jsxs(ie,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[o.jsx(we,{name:"state",label:"State",options:Ut,getOptionLabel:c=>c.label,isOptionEqualToValue:(c,g)=>c.label===g.label,renderOption:(c,g)=>D.createElement("li",{...c,key:g.label},g.label),onChange:(c,g)=>u(g)}),o.jsx(we,{name:"city",label:"City",options:Vt[d]||[],getOptionLabel:c=>c.label,isOptionEqualToValue:(c,g)=>c.label===g.value,renderOption:(c,g)=>D.createElement("li",{...c,key:g.label},g.label)}),o.jsx(N,{name:"pincode",label:"Pincode"})]}),o.jsxs(U,{spacing:3,alignItems:"flex-end",sx:{mt:3},children:[o.jsx(N,{name:"address_line_1",multiline:!0,rows:4,label:"Primary Address"}),o.jsx(N,{name:"address_line_2",multiline:!0,rows:4,label:"Secondary Address"}),o.jsx(le,{type:"submit",variant:"contained",loading:h,children:"Save Changes"})]})]})})};function Ni({Bank_Detail:a}){const{enqueueSnackbar:e}=Se(),{initialize:i}=fe(),t=Z().shape({account_name:k(),account_number:k(),ifsc_code:k(),bank_name:k(),upi_id:k()}).test("oneOfRequired","Either UPI id or Bank Account details are required",function(c){const{account_name:g,account_number:x,ifsc_code:C,bank_name:w,upi_id:S}=c;return!S&&(!g||!x||!C||!w)?this.createError({path:"upi_id",message:"Either UPI id or Bank Account details are required"}):!0}),n={account_name:(a==null?void 0:a.Account_name)||"",account_number:(a==null?void 0:a.Account_no)||"",ifsc_code:(a==null?void 0:a.Ifsc_code)||"",bank_name:(a==null?void 0:a.bank_name)||"",upi_id:(a==null?void 0:a.upi_id)||""},r=ge({resolver:Ee(t),defaultValues:n}),{handleSubmit:s,formState:{isSubmitting:h},setValue:p}=r,[d,l]=D.useState(""),u=s(async({account_name:c,account_number:g,ifsc_code:x,bank_name:C,upi_id:w})=>{var S;try{const T=await K.put(ee.updateSetting,{bank:{account_name:c,account_number:g,ifsc_code:x,bank_name:C,upi_id:w}});i(),(S=T==null?void 0:T.data)!=null&&S.success&&e("Updated successfully")}catch(T){console.error(T),e("Error while updating",{variant:"error"})}});return D.useEffect(()=>{p("account_number",a==null?void 0:a.Account_no)},[]),o.jsx(ve,{methods:r,onSubmit:u,children:o.jsx(ae,{container:!0,spacing:3,children:o.jsx(ae,{xs:12,lg:12,md:12,children:o.jsxs(ne,{sx:{p:3},children:[o.jsx(je,{variant:"h4",sx:{mb:2},gutterBottom:!0,children:"Bank Detail"}),!!d&&o.jsx(ui,{sx:{mb:2},severity:"error",children:d}),o.jsxs(ie,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[o.jsx(N,{name:"account_name",label:"Account Name"}),o.jsx(N,{name:"account_number",label:"Account Number"}),o.jsx(N,{name:"bank_name",label:"Bank Name "}),o.jsx(N,{name:"ifsc_code",label:"IFSC Code ",sx:{textTransform:"uppercase"}})]}),o.jsx(U,{width:1,alignItems:"center",sx:{mb:2,mt:2},children:o.jsx(je,{variant:"h6",gutterBottom:!0,children:"OR"})}),o.jsx(N,{name:"upi_id",label:"UPI Id/Google Pay/Phone Pe"}),o.jsx(U,{spacing:3,alignItems:"flex-end",sx:{mt:3},children:o.jsx(le,{type:"submit",variant:"contained",loading:h,children:"Save Changes"})})]})})})})}function Ai(){const{enqueueSnackbar:a}=Se(),e=pi(),i=Z().shape({oldPassword:k().required("Old Password is required"),newPassword:k().required("New Password is required").min(8,"Password must be at least 8 characters").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/,"Password must contain at least one uppercase letter, one lowercase letter, one special character, and one digit").test("no-match","New password must be different than old password",(d,{parent:l})=>d!==l.oldPassword),confirmNewPassword:k().oneOf([mi("newPassword")],"Passwords must match")}),t={oldPassword:"",newPassword:"",confirmNewPassword:""},n=ge({resolver:Ee(i),defaultValues:t}),{reset:r,handleSubmit:s,formState:{isSubmitting:h}}=n,p=s(async d=>{var l,u;try{const c=await((u=K)==null?void 0:u.patch((l=ee)==null?void 0:l.changePassword,{current_password:d==null?void 0:d.oldPassword,password:d==null?void 0:d.newPassword,confirm_password:d==null?void 0:d.confirmNewPassword}));a("Update success!"),console.info("DATA",d)}catch(c){console.error(c),a((c==null?void 0:c.message)||"Error while changing password!",{variant:"error"})}});return o.jsx(ve,{methods:n,onSubmit:p,children:o.jsxs(U,{component:ne,spacing:3,sx:{p:3},children:[o.jsx(N,{name:"oldPassword",type:e.value?"text":"password",label:"Old Password",InputProps:{endAdornment:o.jsx(ue,{position:"end",children:o.jsx(Qe,{onClick:e.onToggle,edge:"end",children:o.jsx(X,{icon:e.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),o.jsx(N,{name:"newPassword",label:"New Password",type:e.value?"text":"password",InputProps:{endAdornment:o.jsx(ue,{position:"end",children:o.jsx(Qe,{onClick:e.onToggle,edge:"end",children:o.jsx(X,{icon:e.value?"solar:eye-bold":"solar:eye-closed-bold"})})})},helperText:o.jsxs(U,{component:"span",direction:"row",alignItems:"center",children:[o.jsx(X,{icon:"eva:info-fill",width:16,sx:{mr:.5}})," Please create a password with a minimum of 8 characters, including at least one uppercase letter, one lowercase letter, one digit, and one special character for enhanced security."]})}),o.jsx(N,{name:"confirmNewPassword",type:e.value?"text":"password",label:"Confirm New Password",InputProps:{endAdornment:o.jsx(ue,{position:"end",children:o.jsx(Qe,{onClick:e.onToggle,edge:"end",children:o.jsx(X,{icon:e.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}}),o.jsx(le,{type:"submit",variant:"contained",loading:h,sx:{ml:"auto"},children:"Save Changes"})]})})}/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */function Et(a,e){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);e&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(a,n).enumerable})),i.push.apply(i,t)}return i}function Ft(a){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Et(Object(i),!0).forEach(function(t){Pi(a,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):Et(Object(i)).forEach(function(t){Object.defineProperty(a,t,Object.getOwnPropertyDescriptor(i,t))})}return a}function rt(a){"@babel/helpers - typeof";return rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(a)}function Ri(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function _t(a,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,$t(t.key),t)}}function Ii(a,e,i){return e&&_t(a.prototype,e),i&&_t(a,i),Object.defineProperty(a,"prototype",{writable:!1}),a}function Pi(a,e,i){return e=$t(e),e in a?Object.defineProperty(a,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[e]=i,a}function Gt(a){return ki(a)||Li(a)||Bi(a)||zi()}function ki(a){if(Array.isArray(a))return nt(a)}function Li(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Bi(a,e){if(a){if(typeof a=="string")return nt(a,e);var i=Object.prototype.toString.call(a).slice(8,-1);if(i==="Object"&&a.constructor&&(i=a.constructor.name),i==="Map"||i==="Set")return Array.from(a);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return nt(a,e)}}function nt(a,e){(e==null||e>a.length)&&(e=a.length);for(var i=0,t=new Array(e);i<e;i++)t[i]=a[i];return t}function zi(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yi(a,e){if(typeof a!="object"||a===null)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var t=i.call(a,e||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(a)}function $t(a){var e=Yi(a,"string");return typeof e=="symbol"?e:String(e)}var Ze=typeof window<"u"&&typeof window.document<"u",se=Ze?window:{},ft=Ze&&se.document.documentElement?"ontouchstart"in se.document.documentElement:!1,gt=Ze?"PointerEvent"in se:!1,R="cropper",vt="all",Kt="crop",Zt="move",Jt="zoom",be="e",xe="w",Te="s",de="n",ke="ne",Le="nw",Be="se",ze="sw",st="".concat(R,"-crop"),Tt="".concat(R,"-disabled"),G="".concat(R,"-hidden"),Dt="".concat(R,"-hide"),Hi="".concat(R,"-invisible"),Ke="".concat(R,"-modal"),ot="".concat(R,"-move"),He="".concat(R,"Action"),Ge="".concat(R,"Preview"),bt="crop",Qt="move",ei="none",ct="crop",lt="cropend",ht="cropmove",dt="cropstart",Ot="dblclick",Wi=ft?"touchstart":"mousedown",Xi=ft?"touchmove":"mousemove",qi=ft?"touchend touchcancel":"mouseup",Mt=gt?"pointerdown":Wi,Nt=gt?"pointermove":Xi,At=gt?"pointerup pointercancel":qi,Rt="ready",It="resize",Pt="wheel",ut="zoom",kt="image/jpeg",Ui=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,Vi=/^data:/,Fi=/^data:image\/jpeg;base64,/,Gi=/^img|canvas$/i,ti=200,ii=100,Lt={viewMode:0,dragMode:bt,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:ti,minContainerHeight:ii,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},$i='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',Ki=Number.isNaN||se.isNaN;function _(a){return typeof a=="number"&&!Ki(a)}var Bt=function(e){return e>0&&e<1/0};function et(a){return typeof a>"u"}function Ce(a){return rt(a)==="object"&&a!==null}var Zi=Object.prototype.hasOwnProperty;function De(a){if(!Ce(a))return!1;try{var e=a.constructor,i=e.prototype;return e&&i&&Zi.call(i,"isPrototypeOf")}catch{return!1}}function F(a){return typeof a=="function"}var Ji=Array.prototype.slice;function ai(a){return Array.from?Array.from(a):Ji.call(a)}function L(a,e){return a&&F(e)&&(Array.isArray(a)||_(a.length)?ai(a).forEach(function(i,t){e.call(a,i,t,a)}):Ce(a)&&Object.keys(a).forEach(function(i){e.call(a,a[i],i,a)})),a}var I=Object.assign||function(e){for(var i=arguments.length,t=new Array(i>1?i-1:0),n=1;n<i;n++)t[n-1]=arguments[n];return Ce(e)&&t.length>0&&t.forEach(function(r){Ce(r)&&Object.keys(r).forEach(function(s){e[s]=r[s]})}),e},Qi=/\.\d*(?:0|9){12}\d*$/;function Me(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return Qi.test(a)?Math.round(a*e)/e:a}var ea=/^width|height|left|top|marginLeft|marginTop$/;function pe(a,e){var i=a.style;L(e,function(t,n){ea.test(n)&&_(t)&&(t="".concat(t,"px")),i[n]=t})}function ta(a,e){return a.classList?a.classList.contains(e):a.className.indexOf(e)>-1}function H(a,e){if(e){if(_(a.length)){L(a,function(t){H(t,e)});return}if(a.classList){a.classList.add(e);return}var i=a.className.trim();i?i.indexOf(e)<0&&(a.className="".concat(i," ").concat(e)):a.className=e}}function re(a,e){if(e){if(_(a.length)){L(a,function(i){re(i,e)});return}if(a.classList){a.classList.remove(e);return}a.className.indexOf(e)>=0&&(a.className=a.className.replace(e,""))}}function Oe(a,e,i){if(e){if(_(a.length)){L(a,function(t){Oe(t,e,i)});return}i?H(a,e):re(a,e)}}var ia=/([a-z\d])([A-Z])/g;function xt(a){return a.replace(ia,"$1-$2").toLowerCase()}function pt(a,e){return Ce(a[e])?a[e]:a.dataset?a.dataset[e]:a.getAttribute("data-".concat(xt(e)))}function We(a,e,i){Ce(i)?a[e]=i:a.dataset?a.dataset[e]=i:a.setAttribute("data-".concat(xt(e)),i)}function aa(a,e){if(Ce(a[e]))try{delete a[e]}catch{a[e]=void 0}else if(a.dataset)try{delete a.dataset[e]}catch{a.dataset[e]=void 0}else a.removeAttribute("data-".concat(xt(e)))}var ri=/\s\s*/,ni=function(){var a=!1;if(Ze){var e=!1,i=function(){},t=Object.defineProperty({},"once",{get:function(){return a=!0,e},set:function(r){e=r}});se.addEventListener("test",i,t),se.removeEventListener("test",i,t)}return a}();function te(a,e,i){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=i;e.trim().split(ri).forEach(function(r){if(!ni){var s=a.listeners;s&&s[r]&&s[r][i]&&(n=s[r][i],delete s[r][i],Object.keys(s[r]).length===0&&delete s[r],Object.keys(s).length===0&&delete a.listeners)}a.removeEventListener(r,n,t)})}function Q(a,e,i){var t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=i;e.trim().split(ri).forEach(function(r){if(t.once&&!ni){var s=a.listeners,h=s===void 0?{}:s;n=function(){delete h[r][i],a.removeEventListener(r,n,t);for(var d=arguments.length,l=new Array(d),u=0;u<d;u++)l[u]=arguments[u];i.apply(a,l)},h[r]||(h[r]={}),h[r][i]&&a.removeEventListener(r,h[r][i],t),h[r][i]=n,a.listeners=h}a.addEventListener(r,n,t)})}function Ne(a,e,i){var t;return F(Event)&&F(CustomEvent)?t=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(t=document.createEvent("CustomEvent"),t.initCustomEvent(e,!0,!0,i)),a.dispatchEvent(t)}function si(a){var e=a.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var tt=se.location,ra=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function zt(a){var e=a.match(ra);return e!==null&&(e[1]!==tt.protocol||e[2]!==tt.hostname||e[3]!==tt.port)}function Yt(a){var e="timestamp=".concat(new Date().getTime());return a+(a.indexOf("?")===-1?"?":"&")+e}function Ye(a){var e=a.rotate,i=a.scaleX,t=a.scaleY,n=a.translateX,r=a.translateY,s=[];_(n)&&n!==0&&s.push("translateX(".concat(n,"px)")),_(r)&&r!==0&&s.push("translateY(".concat(r,"px)")),_(e)&&e!==0&&s.push("rotate(".concat(e,"deg)")),_(i)&&i!==1&&s.push("scaleX(".concat(i,")")),_(t)&&t!==1&&s.push("scaleY(".concat(t,")"));var h=s.length?s.join(" "):"none";return{WebkitTransform:h,msTransform:h,transform:h}}function na(a){var e=Ft({},a),i=0;return L(a,function(t,n){delete e[n],L(e,function(r){var s=Math.abs(t.startX-r.startX),h=Math.abs(t.startY-r.startY),p=Math.abs(t.endX-r.endX),d=Math.abs(t.endY-r.endY),l=Math.sqrt(s*s+h*h),u=Math.sqrt(p*p+d*d),c=(u-l)/l;Math.abs(c)>Math.abs(i)&&(i=c)})}),i}function $e(a,e){var i=a.pageX,t=a.pageY,n={endX:i,endY:t};return e?n:Ft({startX:i,startY:t},n)}function sa(a){var e=0,i=0,t=0;return L(a,function(n){var r=n.startX,s=n.startY;e+=r,i+=s,t+=1}),e/=t,i/=t,{pageX:e,pageY:i}}function me(a){var e=a.aspectRatio,i=a.height,t=a.width,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",r=Bt(t),s=Bt(i);if(r&&s){var h=i*e;n==="contain"&&h>t||n==="cover"&&h<t?i=t/e:t=i*e}else r?i=t/e:s&&(t=i*e);return{width:t,height:i}}function oa(a){var e=a.width,i=a.height,t=a.degree;if(t=Math.abs(t)%180,t===90)return{width:i,height:e};var n=t%90*Math.PI/180,r=Math.sin(n),s=Math.cos(n),h=e*s+i*r,p=e*r+i*s;return t>90?{width:p,height:h}:{width:h,height:p}}function ca(a,e,i,t){var n=e.aspectRatio,r=e.naturalWidth,s=e.naturalHeight,h=e.rotate,p=h===void 0?0:h,d=e.scaleX,l=d===void 0?1:d,u=e.scaleY,c=u===void 0?1:u,g=i.aspectRatio,x=i.naturalWidth,C=i.naturalHeight,w=t.fillColor,S=w===void 0?"transparent":w,T=t.imageSmoothingEnabled,M=T===void 0?!0:T,v=t.imageSmoothingQuality,E=v===void 0?"low":v,m=t.maxWidth,f=m===void 0?1/0:m,y=t.maxHeight,j=y===void 0?1/0:y,A=t.minWidth,V=A===void 0?0:A,q=t.minHeight,P=q===void 0?0:q,W=document.createElement("canvas"),z=W.getContext("2d"),$=me({aspectRatio:g,width:f,height:j}),oe=me({aspectRatio:g,width:V,height:P},"cover"),he=Math.min($.width,Math.max(oe.width,x)),_e=Math.min($.height,Math.max(oe.height,C)),Ae=me({aspectRatio:n,width:f,height:j}),Re=me({aspectRatio:n,width:V,height:P},"cover"),Ie=Math.min(Ae.width,Math.max(Re.width,r)),Pe=Math.min(Ae.height,Math.max(Re.height,s)),Xe=[-Ie/2,-Pe/2,Ie,Pe];return W.width=Me(he),W.height=Me(_e),z.fillStyle=S,z.fillRect(0,0,he,_e),z.save(),z.translate(he/2,_e/2),z.rotate(p*Math.PI/180),z.scale(l,c),z.imageSmoothingEnabled=M,z.imageSmoothingQuality=E,z.drawImage.apply(z,[a].concat(Gt(Xe.map(function(qe){return Math.floor(Me(qe))})))),z.restore(),W}var oi=String.fromCharCode;function la(a,e,i){var t="";i+=e;for(var n=e;n<i;n+=1)t+=oi(a.getUint8(n));return t}var ha=/^data:.*,/;function da(a){var e=a.replace(ha,""),i=atob(e),t=new ArrayBuffer(i.length),n=new Uint8Array(t);return L(n,function(r,s){n[s]=i.charCodeAt(s)}),t}function ua(a,e){for(var i=[],t=8192,n=new Uint8Array(a);n.length>0;)i.push(oi.apply(null,ai(n.subarray(0,t)))),n=n.subarray(t);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}function pa(a){var e=new DataView(a),i;try{var t,n,r;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var s=e.byteLength,h=2;h+1<s;){if(e.getUint8(h)===255&&e.getUint8(h+1)===225){n=h;break}h+=1}if(n){var p=n+4,d=n+10;if(la(e,p,4)==="Exif"){var l=e.getUint16(d);if(t=l===18761,(t||l===19789)&&e.getUint16(d+2,t)===42){var u=e.getUint32(d+4,t);u>=8&&(r=d+u)}}}if(r){var c=e.getUint16(r,t),g,x;for(x=0;x<c;x+=1)if(g=r+x*12+2,e.getUint16(g,t)===274){g+=8,i=e.getUint16(g,t),e.setUint16(g,1,t);break}}}catch{i=1}return i}function ma(a){var e=0,i=1,t=1;switch(a){case 2:i=-1;break;case 3:e=-180;break;case 4:t=-1;break;case 5:e=90,t=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:i,scaleY:t}}var fa={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,i=this.options,t=this.container,n=this.cropper,r=Number(i.minContainerWidth),s=Number(i.minContainerHeight);H(n,G),re(e,G);var h={width:Math.max(t.offsetWidth,r>=0?r:ti),height:Math.max(t.offsetHeight,s>=0?s:ii)};this.containerData=h,pe(n,{width:h.width,height:h.height}),H(e,G),re(n,G)},initCanvas:function(){var e=this.containerData,i=this.imageData,t=this.options.viewMode,n=Math.abs(i.rotate)%180===90,r=n?i.naturalHeight:i.naturalWidth,s=n?i.naturalWidth:i.naturalHeight,h=r/s,p=e.width,d=e.height;e.height*h>e.width?t===3?p=e.height*h:d=e.width/h:t===3?d=e.width/h:p=e.height*h;var l={aspectRatio:h,naturalWidth:r,naturalHeight:s,width:p,height:d};this.canvasData=l,this.limited=t===1||t===2,this.limitCanvas(!0,!0),l.width=Math.min(Math.max(l.width,l.minWidth),l.maxWidth),l.height=Math.min(Math.max(l.height,l.minHeight),l.maxHeight),l.left=(e.width-l.width)/2,l.top=(e.height-l.height)/2,l.oldLeft=l.left,l.oldTop=l.top,this.initialCanvasData=I({},l)},limitCanvas:function(e,i){var t=this.options,n=this.containerData,r=this.canvasData,s=this.cropBoxData,h=t.viewMode,p=r.aspectRatio,d=this.cropped&&s;if(e){var l=Number(t.minCanvasWidth)||0,u=Number(t.minCanvasHeight)||0;h>1?(l=Math.max(l,n.width),u=Math.max(u,n.height),h===3&&(u*p>l?l=u*p:u=l/p)):h>0&&(l?l=Math.max(l,d?s.width:0):u?u=Math.max(u,d?s.height:0):d&&(l=s.width,u=s.height,u*p>l?l=u*p:u=l/p));var c=me({aspectRatio:p,width:l,height:u});l=c.width,u=c.height,r.minWidth=l,r.minHeight=u,r.maxWidth=1/0,r.maxHeight=1/0}if(i)if(h>(d?0:1)){var g=n.width-r.width,x=n.height-r.height;r.minLeft=Math.min(0,g),r.minTop=Math.min(0,x),r.maxLeft=Math.max(0,g),r.maxTop=Math.max(0,x),d&&this.limited&&(r.minLeft=Math.min(s.left,s.left+(s.width-r.width)),r.minTop=Math.min(s.top,s.top+(s.height-r.height)),r.maxLeft=s.left,r.maxTop=s.top,h===2&&(r.width>=n.width&&(r.minLeft=Math.min(0,g),r.maxLeft=Math.max(0,g)),r.height>=n.height&&(r.minTop=Math.min(0,x),r.maxTop=Math.max(0,x))))}else r.minLeft=-r.width,r.minTop=-r.height,r.maxLeft=n.width,r.maxTop=n.height},renderCanvas:function(e,i){var t=this.canvasData,n=this.imageData;if(i){var r=oa({width:n.naturalWidth*Math.abs(n.scaleX||1),height:n.naturalHeight*Math.abs(n.scaleY||1),degree:n.rotate||0}),s=r.width,h=r.height,p=t.width*(s/t.naturalWidth),d=t.height*(h/t.naturalHeight);t.left-=(p-t.width)/2,t.top-=(d-t.height)/2,t.width=p,t.height=d,t.aspectRatio=s/h,t.naturalWidth=s,t.naturalHeight=h,this.limitCanvas(!0,!1)}(t.width>t.maxWidth||t.width<t.minWidth)&&(t.left=t.oldLeft),(t.height>t.maxHeight||t.height<t.minHeight)&&(t.top=t.oldTop),t.width=Math.min(Math.max(t.width,t.minWidth),t.maxWidth),t.height=Math.min(Math.max(t.height,t.minHeight),t.maxHeight),this.limitCanvas(!1,!0),t.left=Math.min(Math.max(t.left,t.minLeft),t.maxLeft),t.top=Math.min(Math.max(t.top,t.minTop),t.maxTop),t.oldLeft=t.left,t.oldTop=t.top,pe(this.canvas,I({width:t.width,height:t.height},Ye({translateX:t.left,translateY:t.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var i=this.canvasData,t=this.imageData,n=t.naturalWidth*(i.width/i.naturalWidth),r=t.naturalHeight*(i.height/i.naturalHeight);I(t,{width:n,height:r,left:(i.width-n)/2,top:(i.height-r)/2}),pe(this.image,I({width:t.width,height:t.height},Ye(I({translateX:t.left,translateY:t.top},t)))),e&&this.output()},initCropBox:function(){var e=this.options,i=this.canvasData,t=e.aspectRatio||e.initialAspectRatio,n=Number(e.autoCropArea)||.8,r={width:i.width,height:i.height};t&&(i.height*t>i.width?r.height=r.width/t:r.width=r.height*t),this.cropBoxData=r,this.limitCropBox(!0,!0),r.width=Math.min(Math.max(r.width,r.minWidth),r.maxWidth),r.height=Math.min(Math.max(r.height,r.minHeight),r.maxHeight),r.width=Math.max(r.minWidth,r.width*n),r.height=Math.max(r.minHeight,r.height*n),r.left=i.left+(i.width-r.width)/2,r.top=i.top+(i.height-r.height)/2,r.oldLeft=r.left,r.oldTop=r.top,this.initialCropBoxData=I({},r)},limitCropBox:function(e,i){var t=this.options,n=this.containerData,r=this.canvasData,s=this.cropBoxData,h=this.limited,p=t.aspectRatio;if(e){var d=Number(t.minCropBoxWidth)||0,l=Number(t.minCropBoxHeight)||0,u=h?Math.min(n.width,r.width,r.width+r.left,n.width-r.left):n.width,c=h?Math.min(n.height,r.height,r.height+r.top,n.height-r.top):n.height;d=Math.min(d,n.width),l=Math.min(l,n.height),p&&(d&&l?l*p>d?l=d/p:d=l*p:d?l=d/p:l&&(d=l*p),c*p>u?c=u/p:u=c*p),s.minWidth=Math.min(d,u),s.minHeight=Math.min(l,c),s.maxWidth=u,s.maxHeight=c}i&&(h?(s.minLeft=Math.max(0,r.left),s.minTop=Math.max(0,r.top),s.maxLeft=Math.min(n.width,r.left+r.width)-s.width,s.maxTop=Math.min(n.height,r.top+r.height)-s.height):(s.minLeft=0,s.minTop=0,s.maxLeft=n.width-s.width,s.maxTop=n.height-s.height))},renderCropBox:function(){var e=this.options,i=this.containerData,t=this.cropBoxData;(t.width>t.maxWidth||t.width<t.minWidth)&&(t.left=t.oldLeft),(t.height>t.maxHeight||t.height<t.minHeight)&&(t.top=t.oldTop),t.width=Math.min(Math.max(t.width,t.minWidth),t.maxWidth),t.height=Math.min(Math.max(t.height,t.minHeight),t.maxHeight),this.limitCropBox(!1,!0),t.left=Math.min(Math.max(t.left,t.minLeft),t.maxLeft),t.top=Math.min(Math.max(t.top,t.minTop),t.maxTop),t.oldLeft=t.left,t.oldTop=t.top,e.movable&&e.cropBoxMovable&&We(this.face,He,t.width>=i.width&&t.height>=i.height?Zt:vt),pe(this.cropBox,I({width:t.width,height:t.height},Ye({translateX:t.left,translateY:t.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Ne(this.element,ct,this.getData())}},ga={initPreview:function(){var e=this.element,i=this.crossOrigin,t=this.options.preview,n=i?this.crossOriginUrl:this.url,r=e.alt||"The image to preview",s=document.createElement("img");if(i&&(s.crossOrigin=i),s.src=n,s.alt=r,this.viewBox.appendChild(s),this.viewBoxImage=s,!!t){var h=t;typeof t=="string"?h=e.ownerDocument.querySelectorAll(t):t.querySelector&&(h=[t]),this.previews=h,L(h,function(p){var d=document.createElement("img");We(p,Ge,{width:p.offsetWidth,height:p.offsetHeight,html:p.innerHTML}),i&&(d.crossOrigin=i),d.src=n,d.alt=r,d.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',p.innerHTML="",p.appendChild(d)})}},resetPreview:function(){L(this.previews,function(e){var i=pt(e,Ge);pe(e,{width:i.width,height:i.height}),e.innerHTML=i.html,aa(e,Ge)})},preview:function(){var e=this.imageData,i=this.canvasData,t=this.cropBoxData,n=t.width,r=t.height,s=e.width,h=e.height,p=t.left-i.left-e.left,d=t.top-i.top-e.top;!this.cropped||this.disabled||(pe(this.viewBoxImage,I({width:s,height:h},Ye(I({translateX:-p,translateY:-d},e)))),L(this.previews,function(l){var u=pt(l,Ge),c=u.width,g=u.height,x=c,C=g,w=1;n&&(w=c/n,C=r*w),r&&C>g&&(w=g/r,x=n*w,C=g),pe(l,{width:x,height:C}),pe(l.getElementsByTagName("img")[0],I({width:s*w,height:h*w},Ye(I({translateX:-p*w,translateY:-d*w},e))))}))}},va={bind:function(){var e=this.element,i=this.options,t=this.cropper;F(i.cropstart)&&Q(e,dt,i.cropstart),F(i.cropmove)&&Q(e,ht,i.cropmove),F(i.cropend)&&Q(e,lt,i.cropend),F(i.crop)&&Q(e,ct,i.crop),F(i.zoom)&&Q(e,ut,i.zoom),Q(t,Mt,this.onCropStart=this.cropStart.bind(this)),i.zoomable&&i.zoomOnWheel&&Q(t,Pt,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&Q(t,Ot,this.onDblclick=this.dblclick.bind(this)),Q(e.ownerDocument,Nt,this.onCropMove=this.cropMove.bind(this)),Q(e.ownerDocument,At,this.onCropEnd=this.cropEnd.bind(this)),i.responsive&&Q(window,It,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,i=this.options,t=this.cropper;F(i.cropstart)&&te(e,dt,i.cropstart),F(i.cropmove)&&te(e,ht,i.cropmove),F(i.cropend)&&te(e,lt,i.cropend),F(i.crop)&&te(e,ct,i.crop),F(i.zoom)&&te(e,ut,i.zoom),te(t,Mt,this.onCropStart),i.zoomable&&i.zoomOnWheel&&te(t,Pt,this.onWheel,{passive:!1,capture:!0}),i.toggleDragModeOnDblclick&&te(t,Ot,this.onDblclick),te(e.ownerDocument,Nt,this.onCropMove),te(e.ownerDocument,At,this.onCropEnd),i.responsive&&te(window,It,this.onResize)}},ba={resize:function(){if(!this.disabled){var e=this.options,i=this.container,t=this.containerData,n=i.offsetWidth/t.width,r=i.offsetHeight/t.height,s=Math.abs(n-1)>Math.abs(r-1)?n:r;if(s!==1){var h,p;e.restore&&(h=this.getCanvasData(),p=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(L(h,function(d,l){h[l]=d*s})),this.setCropBoxData(L(p,function(d,l){p[l]=d*s})))}}},dblclick:function(){this.disabled||this.options.dragMode===ei||this.setDragMode(ta(this.dragBox,st)?Qt:bt)},wheel:function(e){var i=this,t=Number(this.options.wheelZoomRatio)||.1,n=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){i.wheeling=!1},50),e.deltaY?n=e.deltaY>0?1:-1:e.wheelDelta?n=-e.wheelDelta/120:e.detail&&(n=e.detail>0?1:-1),this.zoom(-n*t,e)))},cropStart:function(e){var i=e.buttons,t=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(_(i)&&i!==1||_(t)&&t!==0||e.ctrlKey))){var n=this.options,r=this.pointers,s;e.changedTouches?L(e.changedTouches,function(h){r[h.identifier]=$e(h)}):r[e.pointerId||0]=$e(e),Object.keys(r).length>1&&n.zoomable&&n.zoomOnTouch?s=Jt:s=pt(e.target,He),Ui.test(s)&&Ne(this.element,dt,{originalEvent:e,action:s})!==!1&&(e.preventDefault(),this.action=s,this.cropping=!1,s===Kt&&(this.cropping=!0,H(this.dragBox,Ke)))}},cropMove:function(e){var i=this.action;if(!(this.disabled||!i)){var t=this.pointers;e.preventDefault(),Ne(this.element,ht,{originalEvent:e,action:i})!==!1&&(e.changedTouches?L(e.changedTouches,function(n){I(t[n.identifier]||{},$e(n,!0))}):I(t[e.pointerId||0]||{},$e(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var i=this.action,t=this.pointers;e.changedTouches?L(e.changedTouches,function(n){delete t[n.identifier]}):delete t[e.pointerId||0],i&&(e.preventDefault(),Object.keys(t).length||(this.action=""),this.cropping&&(this.cropping=!1,Oe(this.dragBox,Ke,this.cropped&&this.options.modal)),Ne(this.element,lt,{originalEvent:e,action:i}))}}},xa={change:function(e){var i=this.options,t=this.canvasData,n=this.containerData,r=this.cropBoxData,s=this.pointers,h=this.action,p=i.aspectRatio,d=r.left,l=r.top,u=r.width,c=r.height,g=d+u,x=l+c,C=0,w=0,S=n.width,T=n.height,M=!0,v;!p&&e.shiftKey&&(p=u&&c?u/c:1),this.limited&&(C=r.minLeft,w=r.minTop,S=C+Math.min(n.width,t.width,t.left+t.width),T=w+Math.min(n.height,t.height,t.top+t.height));var E=s[Object.keys(s)[0]],m={x:E.endX-E.startX,y:E.endY-E.startY},f=function(j){switch(j){case be:g+m.x>S&&(m.x=S-g);break;case xe:d+m.x<C&&(m.x=C-d);break;case de:l+m.y<w&&(m.y=w-l);break;case Te:x+m.y>T&&(m.y=T-x);break}};switch(h){case vt:d+=m.x,l+=m.y;break;case be:if(m.x>=0&&(g>=S||p&&(l<=w||x>=T))){M=!1;break}f(be),u+=m.x,u<0&&(h=xe,u=-u,d-=u),p&&(c=u/p,l+=(r.height-c)/2);break;case de:if(m.y<=0&&(l<=w||p&&(d<=C||g>=S))){M=!1;break}f(de),c-=m.y,l+=m.y,c<0&&(h=Te,c=-c,l-=c),p&&(u=c*p,d+=(r.width-u)/2);break;case xe:if(m.x<=0&&(d<=C||p&&(l<=w||x>=T))){M=!1;break}f(xe),u-=m.x,d+=m.x,u<0&&(h=be,u=-u,d-=u),p&&(c=u/p,l+=(r.height-c)/2);break;case Te:if(m.y>=0&&(x>=T||p&&(d<=C||g>=S))){M=!1;break}f(Te),c+=m.y,c<0&&(h=de,c=-c,l-=c),p&&(u=c*p,d+=(r.width-u)/2);break;case ke:if(p){if(m.y<=0&&(l<=w||g>=S)){M=!1;break}f(de),c-=m.y,l+=m.y,u=c*p}else f(de),f(be),m.x>=0?g<S?u+=m.x:m.y<=0&&l<=w&&(M=!1):u+=m.x,m.y<=0?l>w&&(c-=m.y,l+=m.y):(c-=m.y,l+=m.y);u<0&&c<0?(h=ze,c=-c,u=-u,l-=c,d-=u):u<0?(h=Le,u=-u,d-=u):c<0&&(h=Be,c=-c,l-=c);break;case Le:if(p){if(m.y<=0&&(l<=w||d<=C)){M=!1;break}f(de),c-=m.y,l+=m.y,u=c*p,d+=r.width-u}else f(de),f(xe),m.x<=0?d>C?(u-=m.x,d+=m.x):m.y<=0&&l<=w&&(M=!1):(u-=m.x,d+=m.x),m.y<=0?l>w&&(c-=m.y,l+=m.y):(c-=m.y,l+=m.y);u<0&&c<0?(h=Be,c=-c,u=-u,l-=c,d-=u):u<0?(h=ke,u=-u,d-=u):c<0&&(h=ze,c=-c,l-=c);break;case ze:if(p){if(m.x<=0&&(d<=C||x>=T)){M=!1;break}f(xe),u-=m.x,d+=m.x,c=u/p}else f(Te),f(xe),m.x<=0?d>C?(u-=m.x,d+=m.x):m.y>=0&&x>=T&&(M=!1):(u-=m.x,d+=m.x),m.y>=0?x<T&&(c+=m.y):c+=m.y;u<0&&c<0?(h=ke,c=-c,u=-u,l-=c,d-=u):u<0?(h=Be,u=-u,d-=u):c<0&&(h=Le,c=-c,l-=c);break;case Be:if(p){if(m.x>=0&&(g>=S||x>=T)){M=!1;break}f(be),u+=m.x,c=u/p}else f(Te),f(be),m.x>=0?g<S?u+=m.x:m.y>=0&&x>=T&&(M=!1):u+=m.x,m.y>=0?x<T&&(c+=m.y):c+=m.y;u<0&&c<0?(h=Le,c=-c,u=-u,l-=c,d-=u):u<0?(h=ze,u=-u,d-=u):c<0&&(h=ke,c=-c,l-=c);break;case Zt:this.move(m.x,m.y),M=!1;break;case Jt:this.zoom(na(s),e),M=!1;break;case Kt:if(!m.x||!m.y){M=!1;break}v=si(this.cropper),d=E.startX-v.left,l=E.startY-v.top,u=r.minWidth,c=r.minHeight,m.x>0?h=m.y>0?Be:ke:m.x<0&&(d-=u,h=m.y>0?ze:Le),m.y<0&&(l-=c),this.cropped||(re(this.cropBox,G),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}M&&(r.width=u,r.height=c,r.left=d,r.top=l,this.action=h,this.renderCropBox()),L(s,function(y){y.startX=y.endX,y.startY=y.endY})}},ya={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&H(this.dragBox,Ke),re(this.cropBox,G),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=I({},this.initialImageData),this.canvasData=I({},this.initialCanvasData),this.cropBoxData=I({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(I(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),re(this.dragBox,Ke),H(this.cropBox,G)),this},replace:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),i?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,L(this.previews,function(t){t.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,re(this.cropper,Tt)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,H(this.cropper,Tt)),this},destroy:function(){var e=this.element;return e[R]?(e[R]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,t=this.canvasData,n=t.left,r=t.top;return this.moveTo(et(e)?e:n+Number(e),et(i)?i:r+Number(i))},moveTo:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,t=this.canvasData,n=!1;return e=Number(e),i=Number(i),this.ready&&!this.disabled&&this.options.movable&&(_(e)&&(t.left=e,n=!0),_(i)&&(t.top=i,n=!0),n&&this.renderCanvas(!0)),this},zoom:function(e,i){var t=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(t.width*e/t.naturalWidth,null,i)},zoomTo:function(e,i,t){var n=this.options,r=this.canvasData,s=r.width,h=r.height,p=r.naturalWidth,d=r.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&n.zoomable){var l=p*e,u=d*e;if(Ne(this.element,ut,{ratio:e,oldRatio:s/p,originalEvent:t})===!1)return this;if(t){var c=this.pointers,g=si(this.cropper),x=c&&Object.keys(c).length?sa(c):{pageX:t.pageX,pageY:t.pageY};r.left-=(l-s)*((x.pageX-g.left-r.left)/s),r.top-=(u-h)*((x.pageY-g.top-r.top)/h)}else De(i)&&_(i.x)&&_(i.y)?(r.left-=(l-s)*((i.x-r.left)/s),r.top-=(u-h)*((i.y-r.top)/h)):(r.left-=(l-s)/2,r.top-=(u-h)/2);r.width=l,r.height=u,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),_(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var i=this.imageData.scaleY;return this.scale(e,_(i)?i:1)},scaleY:function(e){var i=this.imageData.scaleX;return this.scale(_(i)?i:1,e)},scale:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,t=this.imageData,n=!1;return e=Number(e),i=Number(i),this.ready&&!this.disabled&&this.options.scalable&&(_(e)&&(t.scaleX=e,n=!0),_(i)&&(t.scaleY=i,n=!0),n&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=this.options,t=this.imageData,n=this.canvasData,r=this.cropBoxData,s;if(this.ready&&this.cropped){s={x:r.left-n.left,y:r.top-n.top,width:r.width,height:r.height};var h=t.width/t.naturalWidth;if(L(s,function(l,u){s[u]=l/h}),e){var p=Math.round(s.y+s.height),d=Math.round(s.x+s.width);s.x=Math.round(s.x),s.y=Math.round(s.y),s.width=d-s.x,s.height=p-s.y}}else s={x:0,y:0,width:0,height:0};return i.rotatable&&(s.rotate=t.rotate||0),i.scalable&&(s.scaleX=t.scaleX||1,s.scaleY=t.scaleY||1),s},setData:function(e){var i=this.options,t=this.imageData,n=this.canvasData,r={};if(this.ready&&!this.disabled&&De(e)){var s=!1;i.rotatable&&_(e.rotate)&&e.rotate!==t.rotate&&(t.rotate=e.rotate,s=!0),i.scalable&&(_(e.scaleX)&&e.scaleX!==t.scaleX&&(t.scaleX=e.scaleX,s=!0),_(e.scaleY)&&e.scaleY!==t.scaleY&&(t.scaleY=e.scaleY,s=!0)),s&&this.renderCanvas(!0,!0);var h=t.width/t.naturalWidth;_(e.x)&&(r.left=e.x*h+n.left),_(e.y)&&(r.top=e.y*h+n.top),_(e.width)&&(r.width=e.width*h),_(e.height)&&(r.height=e.height*h),this.setCropBoxData(r)}return this},getContainerData:function(){return this.ready?I({},this.containerData):{}},getImageData:function(){return this.sized?I({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,i={};return this.ready&&L(["left","top","width","height","naturalWidth","naturalHeight"],function(t){i[t]=e[t]}),i},setCanvasData:function(e){var i=this.canvasData,t=i.aspectRatio;return this.ready&&!this.disabled&&De(e)&&(_(e.left)&&(i.left=e.left),_(e.top)&&(i.top=e.top),_(e.width)?(i.width=e.width,i.height=e.width/t):_(e.height)&&(i.height=e.height,i.width=e.height*t),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,i;return this.ready&&this.cropped&&(i={left:e.left,top:e.top,width:e.width,height:e.height}),i||{}},setCropBoxData:function(e){var i=this.cropBoxData,t=this.options.aspectRatio,n,r;return this.ready&&this.cropped&&!this.disabled&&De(e)&&(_(e.left)&&(i.left=e.left),_(e.top)&&(i.top=e.top),_(e.width)&&e.width!==i.width&&(n=!0,i.width=e.width),_(e.height)&&e.height!==i.height&&(r=!0,i.height=e.height),t&&(n?i.height=i.width/t:r&&(i.width=i.height*t)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var i=this.canvasData,t=ca(this.image,this.imageData,i,e);if(!this.cropped)return t;var n=this.getData(e.rounded),r=n.x,s=n.y,h=n.width,p=n.height,d=t.width/Math.floor(i.naturalWidth);d!==1&&(r*=d,s*=d,h*=d,p*=d);var l=h/p,u=me({aspectRatio:l,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),c=me({aspectRatio:l,width:e.minWidth||0,height:e.minHeight||0},"cover"),g=me({aspectRatio:l,width:e.width||(d!==1?t.width:h),height:e.height||(d!==1?t.height:p)}),x=g.width,C=g.height;x=Math.min(u.width,Math.max(c.width,x)),C=Math.min(u.height,Math.max(c.height,C));var w=document.createElement("canvas"),S=w.getContext("2d");w.width=Me(x),w.height=Me(C),S.fillStyle=e.fillColor||"transparent",S.fillRect(0,0,x,C);var T=e.imageSmoothingEnabled,M=T===void 0?!0:T,v=e.imageSmoothingQuality;S.imageSmoothingEnabled=M,v&&(S.imageSmoothingQuality=v);var E=t.width,m=t.height,f=r,y=s,j,A,V,q,P,W;f<=-h||f>E?(f=0,j=0,V=0,P=0):f<=0?(V=-f,f=0,j=Math.min(E,h+f),P=j):f<=E&&(V=0,j=Math.min(h,E-f),P=j),j<=0||y<=-p||y>m?(y=0,A=0,q=0,W=0):y<=0?(q=-y,y=0,A=Math.min(m,p+y),W=A):y<=m&&(q=0,A=Math.min(p,m-y),W=A);var z=[f,y,j,A];if(P>0&&W>0){var $=x/h;z.push(V*$,q*$,P*$,W*$)}return S.drawImage.apply(S,[t].concat(Gt(z.map(function(oe){return Math.floor(Me(oe))})))),w},setAspectRatio:function(e){var i=this.options;return!this.disabled&&!et(e)&&(i.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var i=this.options,t=this.dragBox,n=this.face;if(this.ready&&!this.disabled){var r=e===bt,s=i.movable&&e===Qt;e=r||s?e:ei,i.dragMode=e,We(t,He,e),Oe(t,st,r),Oe(t,ot,s),i.cropBoxMovable||(We(n,He,e),Oe(n,st,r),Oe(n,ot,s))}return this}},wa=se.Cropper,ci=function(){function a(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(Ri(this,a),!e||!Gi.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=I({},Lt,De(i)&&i),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return Ii(a,[{key:"init",value:function(){var i=this.element,t=i.tagName.toLowerCase(),n;if(!i[R]){if(i[R]=this,t==="img"){if(this.isImg=!0,n=i.getAttribute("src")||"",this.originalUrl=n,!n)return;n=i.src}else t==="canvas"&&window.HTMLCanvasElement&&(n=i.toDataURL());this.load(n)}}},{key:"load",value:function(i){var t=this;if(i){this.url=i,this.imageData={};var n=this.element,r=this.options;if(!r.rotatable&&!r.scalable&&(r.checkOrientation=!1),!r.checkOrientation||!window.ArrayBuffer){this.clone();return}if(Vi.test(i)){Fi.test(i)?this.read(da(i)):this.clone();return}var s=new XMLHttpRequest,h=this.clone.bind(this);this.reloading=!0,this.xhr=s,s.onabort=h,s.onerror=h,s.ontimeout=h,s.onprogress=function(){s.getResponseHeader("content-type")!==kt&&s.abort()},s.onload=function(){t.read(s.response)},s.onloadend=function(){t.reloading=!1,t.xhr=null},r.checkCrossOrigin&&zt(i)&&n.crossOrigin&&(i=Yt(i)),s.open("GET",i,!0),s.responseType="arraybuffer",s.withCredentials=n.crossOrigin==="use-credentials",s.send()}}},{key:"read",value:function(i){var t=this.options,n=this.imageData,r=pa(i),s=0,h=1,p=1;if(r>1){this.url=ua(i,kt);var d=ma(r);s=d.rotate,h=d.scaleX,p=d.scaleY}t.rotatable&&(n.rotate=s),t.scalable&&(n.scaleX=h,n.scaleY=p),this.clone()}},{key:"clone",value:function(){var i=this.element,t=this.url,n=i.crossOrigin,r=t;this.options.checkCrossOrigin&&zt(t)&&(n||(n="anonymous"),r=Yt(t)),this.crossOrigin=n,this.crossOriginUrl=r;var s=document.createElement("img");n&&(s.crossOrigin=n),s.src=r||t,s.alt=i.alt||"The image to crop",this.image=s,s.onload=this.start.bind(this),s.onerror=this.stop.bind(this),H(s,Dt),i.parentNode.insertBefore(s,i.nextSibling)}},{key:"start",value:function(){var i=this,t=this.image;t.onload=null,t.onerror=null,this.sizing=!0;var n=se.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(se.navigator.userAgent),r=function(d,l){I(i.imageData,{naturalWidth:d,naturalHeight:l,aspectRatio:d/l}),i.initialImageData=I({},i.imageData),i.sizing=!1,i.sized=!0,i.build()};if(t.naturalWidth&&!n){r(t.naturalWidth,t.naturalHeight);return}var s=document.createElement("img"),h=document.body||document.documentElement;this.sizingImage=s,s.onload=function(){r(s.width,s.height),n||h.removeChild(s)},s.src=t.src,n||(s.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",h.appendChild(s))}},{key:"stop",value:function(){var i=this.image;i.onload=null,i.onerror=null,i.parentNode.removeChild(i),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var i=this.element,t=this.options,n=this.image,r=i.parentNode,s=document.createElement("div");s.innerHTML=$i;var h=s.querySelector(".".concat(R,"-container")),p=h.querySelector(".".concat(R,"-canvas")),d=h.querySelector(".".concat(R,"-drag-box")),l=h.querySelector(".".concat(R,"-crop-box")),u=l.querySelector(".".concat(R,"-face"));this.container=r,this.cropper=h,this.canvas=p,this.dragBox=d,this.cropBox=l,this.viewBox=h.querySelector(".".concat(R,"-view-box")),this.face=u,p.appendChild(n),H(i,G),r.insertBefore(h,i.nextSibling),re(n,Dt),this.initPreview(),this.bind(),t.initialAspectRatio=Math.max(0,t.initialAspectRatio)||NaN,t.aspectRatio=Math.max(0,t.aspectRatio)||NaN,t.viewMode=Math.max(0,Math.min(3,Math.round(t.viewMode)))||0,H(l,G),t.guides||H(l.getElementsByClassName("".concat(R,"-dashed")),G),t.center||H(l.getElementsByClassName("".concat(R,"-center")),G),t.background&&H(h,"".concat(R,"-bg")),t.highlight||H(u,Hi),t.cropBoxMovable&&(H(u,ot),We(u,He,vt)),t.cropBoxResizable||(H(l.getElementsByClassName("".concat(R,"-line")),G),H(l.getElementsByClassName("".concat(R,"-point")),G)),this.render(),this.ready=!0,this.setDragMode(t.dragMode),t.autoCrop&&this.crop(),this.setData(t.data),F(t.ready)&&Q(i,Rt,t.ready,{once:!0}),Ne(i,Rt)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var i=this.cropper.parentNode;i&&i.removeChild(this.cropper),re(this.element,G)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=wa,a}},{key:"setDefaults",value:function(i){I(Lt,De(i)&&i)}}]),a}();I(ci.prototype,fa,ga,va,ba,xa,ya);var ye=function(){return ye=Object.assign||function(a){for(var e,i=1,t=arguments.length;i<t;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n]);return a},ye.apply(this,arguments)};function it(a,e){var i={};for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&e.indexOf(t)<0&&(i[t]=a[t]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function"){var n=0;for(t=Object.getOwnPropertySymbols(a);n<t.length;n++)e.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(a,t[n])&&(i[t[n]]=a[t[n]])}return i}var ja=["aspectRatio","autoCrop","autoCropArea","background","center","checkCrossOrigin","checkOrientation","cropBoxMovable","cropBoxResizable","data","dragMode","guides","highlight","initialAspectRatio","minCanvasHeight","minCanvasWidth","minContainerHeight","minContainerWidth","minCropBoxHeight","minCropBoxWidth","modal","movable","preview","responsive","restore","rotatable","scalable","toggleDragModeOnDblclick","viewMode","wheelZoomRatio","zoomOnTouch","zoomOnWheel","zoomable","cropstart","cropmove","cropend","crop","zoom","ready"],Ca={opacity:0,maxWidth:"100%"},mt=Fe.forwardRef(function(a,e){var i=it(a,[]),t=i.dragMode,n=t===void 0?"crop":t,r=i.src,s=i.style,h=i.className,p=i.crossOrigin,d=i.scaleX,l=i.scaleY,u=i.enable,c=i.zoomTo,g=i.rotateTo,x=i.alt,C=x===void 0?"picture":x,w=i.ready,S=i.onInitialized,T=it(i,["dragMode","src","style","className","crossOrigin","scaleX","scaleY","enable","zoomTo","rotateTo","alt","ready","onInitialized"]),M={scaleY:l,scaleX:d,enable:u,zoomTo:c,rotateTo:g},v=function(){for(var m=[],f=0;f<arguments.length;f++)m[f]=arguments[f];var y=D.useRef(null);return Fe.useEffect(function(){m.forEach(function(j){j&&(typeof j=="function"?j(y.current):j.current=y.current)})},[m]),y}(e,D.useRef(null));D.useEffect(function(){var m;!((m=v.current)===null||m===void 0)&&m.cropper&&typeof c=="number"&&v.current.cropper.zoomTo(c)},[i.zoomTo]),D.useEffect(function(){var m;!((m=v.current)===null||m===void 0)&&m.cropper&&r!==void 0&&v.current.cropper.reset().clear().replace(r)},[r]),D.useEffect(function(){if(v.current!==null){var m=new ci(v.current,ye(ye({dragMode:n},T),{ready:function(f){f.currentTarget!==null&&function(y,j){j===void 0&&(j={});var A=j.enable,V=A===void 0||A,q=j.scaleX,P=q===void 0?1:q,W=j.scaleY,z=W===void 0?1:W,$=j.zoomTo,oe=$===void 0?0:$,he=j.rotateTo;V?y.enable():y.disable(),y.scaleX(P),y.scaleY(z),he!==void 0&&y.rotateTo(he),oe>0&&y.zoomTo(oe)}(f.currentTarget.cropper,M),w&&w(f)}}));S&&S(m)}return function(){var f,y;(y=(f=v.current)===null||f===void 0?void 0:f.cropper)===null||y===void 0||y.destroy()}},[v]);var E=function(m){return ja.reduce(function(f,y){var j=f,A=y;return j[A],it(j,[typeof A=="symbol"?A:A+""])},m)}(ye(ye({},T),{crossOrigin:p,src:r,alt:C}));return Fe.createElement("div",{style:s,className:h},Fe.createElement("img",ye({},E,{style:Ca,ref:v})))});const Ht={inputProps:{"aria-label":"Switch demo"}},Sa={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadius:2,boxShadow:24,pt:2,px:4,pb:3};function Ea(){const{enqueueSnackbar:a}=Se(),{user:e,initialize:i}=fe(),t=Z().shape({full_name:k().required("Name is required"),email_id:k().required("Email is required").email("Email must be a valid email address"),Contact_no:k().required("Phone number is required"),Job_title:k().required("Job Title is required")}),n={full_name:(e==null?void 0:e.full_name)||"",email_id:(e==null?void 0:e.email_id)||"",profile_picture:(e==null?void 0:e.profile_picture)||null,Contact_no:(e==null?void 0:e.Contact_no)||"",Job_title:(e==null?void 0:e.Job_title)||""},r=ge({resolver:Ee(t),defaultValues:n}),{setValue:s,handleSubmit:h,formState:{isSubmitting:p}}=r,d=h(async f=>{var y;try{const j=await K.put(ee.updateSetting,{member:{name:f==null?void 0:f.full_name,job:f==null?void 0:f.Job_title}});i(),(y=j==null?void 0:j.data)!=null&&y.success&&a("Updated successfully")}catch(j){console.error(j),a("Error while updating",{variant:"error"})}}),l=D.useRef(null),u=f=>{f&&(l.current=f)},c=f=>new Promise(y=>{f.getCroppedCanvas().toBlob(j=>{y(j)})}),[g,x]=D.useState(!1),[C,w]=D.useState(null),S=D.useCallback(f=>{const y=f[0];if(y){const j=new FileReader;j.onloadend=()=>{w(j.result)},j.readAsDataURL(y),v()}},[s]),[T,M]=D.useState(!1),v=()=>{M(!0)},E=()=>{M(!1)},m=async()=>{var f,y,j;try{if(l.current){const{cropper:A}=l.current,V=await c(A);x(!0);const q=new FormData;q.append("file",V),q.append("upload_preset","bymtctem");const P=await at.post("https://api.cloudinary.com/v1_1/dfznwn1fr/image/upload",q),{data:W}=await K.put(ee.uploadsingleImage,{type:"profile",image:(f=P==null?void 0:P.data)==null?void 0:f.url,imageId:(y=P==null?void 0:P.data)==null?void 0:y.public_id});s("profile_picture",(j=P==null?void 0:P.data)==null?void 0:j.url,{shouldValidate:!0}),a("Profile uploaded successfully"),x(!1),E()}}catch(A){console.log(A)}};return o.jsxs(o.Fragment,{children:[o.jsx(ve,{methods:r,onSubmit:d,children:o.jsxs(ae,{container:!0,spacing:3,children:[o.jsx(ae,{xs:12,md:4,children:o.jsxs(ne,{sx:{pt:10,pb:5,px:3,textAlign:"center"},children:[o.jsx(U,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:1,sx:{position:"absolute",zIndex:9,top:16,right:16,left:16},children:o.jsx(fi,{variant:"filled",color:"info",children:e==null?void 0:e.memberid})}),o.jsx(Wt,{name:"profile_picture",value:C,maxSize:3145728,onDrop:S,helperText:o.jsxs(je,{variant:"caption",sx:{mt:3,mx:"auto",display:"block",textAlign:"center",color:"text.disabled"},children:["Allowed *.jpeg, *.jpg, *.png, *.gif",o.jsx("br",{})," max size of ",gi(3145728)]})})]})}),o.jsx(ae,{xs:12,md:8,children:o.jsxs(ne,{sx:{p:3},children:[o.jsxs(ie,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[o.jsx(N,{InputProps:{readOnly:!0},name:"full_name",label:"Name"}),o.jsx(N,{InputProps:{readOnly:!0},name:"email_id",label:"Email Address"}),o.jsx(N,{InputProps:{readOnly:!0},name:"Contact_no",label:"Phone Number"}),o.jsx(N,{InputProps:{readOnly:!0},name:"Job_title",label:"Job Title"})]}),o.jsx(U,{spacing:3,direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mt:3},children:o.jsxs(U,{children:[o.jsxs(U,{direction:"row",alignItems:"center",children:[o.jsx(wt,{alt:"Whatsapp",src:"/logo/WhatsApp-logo.png"}),o.jsx(jt,{...Ht,defaultChecked:!0})]}),o.jsxs(U,{direction:"row",alignItems:"center",children:[o.jsx(wt,{alt:"Contact",src:"/logo/Google_Contacts.png"}),o.jsx(jt,{onChange:f=>console.log(f.target.value),...Ht,defaultChecked:!0})]})]})})]})})]})}),o.jsx(Xt,{open:T,onClose:E,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:o.jsxs(ie,{sx:Sa,children:[o.jsx(je,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Upload Image"}),o.jsx(ie,{sx:{width:"100%",aspectRatio:"1/1",mx:"auto",mt:2},children:o.jsx("div",{className:"round-crop",style:{width:"100%",height:"100%"},children:o.jsx(mt,{ref:u,src:C,style:{height:"100%",width:"100%",borderRadius:"50%"},aspectRatio:1,guides:!0,dragMode:"move"})})}),o.jsxs(U,{direction:"row",justifyContent:"end",mt:2,gap:2,children:[o.jsx(qt,{type:"button",variant:"outoline",color:"secondary",onClick:E,children:"Cancel"}),o.jsx(le,{onClick:m,color:"inherit",type:"submit",variant:"contained",loading:g,children:"Upload"})]})]})})]})}function _a(){const{enqueueSnackbar:a}=Se();fe();const e=Z().shape({shippingFee:vi().required("Shipping Fee is required").min(0,"Shipping Fee must be a positive number")}),t=ge({defaultValues:{shippingFee:0},resolver:Ee(e)}),{setValue:n,reset:r,handleSubmit:s,formState:{isSubmitting:h}}=t,p=s(async d=>{var l,u,c,g;try{const x=await((u=K)==null?void 0:u.put((l=ee)==null?void 0:l.updateShippingFee,{shippingFee:d==null?void 0:d.shippingFee}));x.data.success&&n("shippingFee",(g=(c=x.data)==null?void 0:c.data)==null?void 0:g.shippingFee),a("Update success!")}catch(x){a((x==null?void 0:x.message)||"Error while Update Shipping Fee!",{variant:"error"})}});return D.useEffect(()=>{(async()=>{var l,u,c;try{const g=await((u=K)==null?void 0:u.get((l=ee)==null?void 0:l.getShippingFee));n("shippingFee",((c=g.data.data)==null?void 0:c.shippingFee)||0)}catch(g){console.log(g)}})()},[n]),o.jsx(ve,{methods:t,onSubmit:p,children:o.jsxs(U,{component:ne,spacing:3,sx:{p:3},children:[o.jsx(N,{name:"shippingFee",type:"number",label:"Shipping Fee"}),o.jsx(le,{type:"submit",variant:"contained",loading:h,sx:{ml:"auto"},children:"Save Changes"})]})})}function li({socialLinks:a}){const{enqueueSnackbar:e}=Se(),{initialize:i}=fe(),t={facebook:a.facebook,instagram:a.instagram,linkedin:a.linkedin,twitter:a.twitter,youtube:a.youtube},n=ge({defaultValues:t}),{handleSubmit:r,formState:{isSubmitting:s}}=n,h=r(async p=>{var d;try{const l=await K.put(ee.updateSocialLink,p);(d=l==null?void 0:l.data)!=null&&d.success&&(e("Updated successfully"),i())}catch(l){console.error(l),e((l==null?void 0:l.message)||"Error while updating",{variant:"error"})}});return o.jsx(ve,{methods:n,onSubmit:h,children:o.jsxs(U,{component:ne,spacing:3,sx:{p:3},children:[o.jsx(N,{name:"facebook",InputProps:{startAdornment:o.jsx(ue,{position:"start",children:o.jsx(X,{width:24,icon:"eva:facebook-fill",color:"#1877F2"})})}}),o.jsx(N,{name:"instagram",InputProps:{startAdornment:o.jsx(ue,{position:"start",children:o.jsx(X,{width:24,icon:"ant-design:instagram-filled",color:"#DF3E30"})})}}),o.jsx(N,{name:"linkedin",InputProps:{startAdornment:o.jsx(ue,{position:"start",children:o.jsx(X,{width:24,icon:"eva:linkedin-fill",color:"#006097"})})}}),o.jsx(N,{name:"twitter",InputProps:{startAdornment:o.jsx(ue,{position:"start",children:o.jsx(X,{width:24,icon:"eva:twitter-fill",color:"#1C9CEA"})})}}),o.jsx(N,{name:"youtube",InputProps:{startAdornment:o.jsx(ue,{position:"start",children:o.jsx(X,{width:24,icon:"mdi:youtube",color:"#CD201F"})})}}),o.jsx(le,{type:"submit",variant:"contained",loading:s,sx:{ml:"auto"},children:"Save Changes"})]})})}li.propTypes={socialLinks:bi.object};const Ta={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadius:2,boxShadow:24,pt:2,px:4,pb:3};function Da(){var _e,Ae,Re,Ie,Pe,Xe,qe,yt;const{enqueueSnackbar:a}=Se(),{user:e,initialize:i}=fe(),t=e==null?void 0:e.Business_Profile[0],[n,r]=D.useState((Ae=(_e=t==null?void 0:t.Bussiness_type)==null?void 0:_e.split("_"))==null?void 0:Ae.join(" ")),s=Z().shape({Bussiness_type:k().required("Bussiness Type is required"),description:null,other_caterogy:n==="Others"?k().required("Other category is required"):null,start_time:Z().required("Start time is required"),end_time:Z().required("End time Type is required"),website_link:k().url("Enter a valid url").optional()}),h={bussiness_name:(t==null?void 0:t.bussiness_name)||"",short_description:(t==null?void 0:t.short_description)||"",Bussiness_type:((Ie=(Re=t==null?void 0:t.Bussiness_type)==null?void 0:Re.split("_"))==null?void 0:Ie.join(" "))||"",description:(t==null?void 0:t.description)||"",start_time:{value:(Pe=t==null?void 0:t.business_hour)==null?void 0:Pe.split(" - ")[0],label:(Xe=t==null?void 0:t.business_hour)==null?void 0:Xe.split(" - ")[0]},end_time:{value:(qe=t==null?void 0:t.business_hour)==null?void 0:qe.split(" - ")[1],label:(yt=t==null?void 0:t.business_hour)==null?void 0:yt.split(" - ")[1]},business_logo:(t==null?void 0:t.business_logo)||null,business_cover_image:(t==null?void 0:t.business_cover_image)||null,website_link:(t==null?void 0:t.website_link)||"",other_caterogy:(t==null?void 0:t.otherType)||""},p=ge({resolver:Ee(s),defaultValues:h}),{setValue:d,handleSubmit:l,formState:{isSubmitting:u}}=p,c=l(async b=>{var O,Y,J;try{const ce=await K.put(ee.updateBusiness,{business:{name:b==null?void 0:b.bussiness_name,short_description:b==null?void 0:b.short_description,type:b==null?void 0:b.Bussiness_type,other:b==null?void 0:b.other_caterogy,hour:`${(O=b==null?void 0:b.start_time)==null?void 0:O.value} - ${(Y=b==null?void 0:b.end_time)==null?void 0:Y.value}`,description:b==null?void 0:b.description,website_link:b==null?void 0:b.website_link}});i(),(J=ce==null?void 0:ce.data)!=null&&J.success&&a("Updated successfully")}catch(ce){console.error(ce),a("Error while updating",{variant:"error"})}}),[g,x]=D.useState(null),[C,w]=D.useState(null),[S,T]=D.useState("Logo"),M=D.useCallback(b=>{const O=b[0];if(O){const Y=new FileReader;Y.onloadend=()=>{x(Y.result)},Y.readAsDataURL(O),T("Logo"),y()}},[d]),v=D.useCallback(b=>{const O=b[0];if(O){const Y=new FileReader;Y.onloadend=()=>{w(Y.result)},Y.readAsDataURL(O),T("Cover"),y()}},[d]),E=b=>{console.log(b),r(b),p.setValue("Bussiness_type",b,{shouldValidate:!0})},[m,f]=D.useState(!1),y=()=>{f(!0)},j=()=>{f(!1)},A=D.useRef(null),V=b=>{b&&(A.current=b)},q=b=>new Promise(O=>{b.getCroppedCanvas().toBlob(Y=>{O(Y)})}),[P,W]=D.useState(!1),z=async()=>{var b,O,Y,J,ce,Ue;try{if(A.current){const{cropper:Je}=A.current,hi=await q(Je);W(!0);const Ve=new FormData;if(Ve.append("file",hi),Ve.append("upload_preset","bymtctem"),S==="Logo"){const B=await at.post("https://api.cloudinary.com/v1_1/dfznwn1fr/image/upload",Ve),{data:di}=await K.put(ee.uploadsingleImage,{type:"logo",image:(b=B==null?void 0:B.data)==null?void 0:b.url,imageId:(O=B==null?void 0:B.data)==null?void 0:O.public_id});d("business_logo",(Y=B==null?void 0:B.data)==null?void 0:Y.url,{shouldValidate:!0}),a("Logo uploaded successfully")}else{const B=await at.post("https://api.cloudinary.com/v1_1/dfznwn1fr/image/upload",Ve),{data:di}=await K.put(ee.uploadsingleImage,{type:"cover",image:(J=B==null?void 0:B.data)==null?void 0:J.url,imageId:(ce=B==null?void 0:B.data)==null?void 0:ce.public_id});d("business_cover_image",(Ue=B==null?void 0:B.data)==null?void 0:Ue.url,{shouldValidate:!0}),a("Cover photo uploaded successfully")}i(),W(!1),j()}}catch(Je){console.log(Je)}},[$,oe]=D.useState([]),he=async()=>{var b;try{const{data:O}=await K.get("/api/admin/business/type?page=1&pageSize=1000"),Y=(b=O==null?void 0:O.data)==null?void 0:b.map(J=>({value:J.type,label:J.type}));oe(Y)}catch(O){console.log(O)}};return D.useEffect(()=>{he()},[]),o.jsxs(o.Fragment,{children:[o.jsx(ve,{methods:p,onSubmit:c,children:o.jsxs(ae,{container:!0,spacing:3,children:[o.jsx(ae,{xs:12,md:4,children:o.jsxs(ne,{sx:{pt:4,pb:5,px:3,textAlign:"center"},children:[o.jsx(Wt,{name:"business_logo",maxSize:3145728,onDrop:M}),o.jsx(xi,{sx:{mt:3},name:"business_cover_image",maxSize:3145728,onDrop:v})]})}),o.jsx(ae,{xs:12,md:8,children:o.jsxs(ne,{sx:{p:3},children:[o.jsxs(ie,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[o.jsx(N,{name:"bussiness_name",label:"Business Name"}),o.jsx(we,{name:"Bussiness_type",label:"Category",options:$.map(b=>b.label),getOptionLabel:b=>b,renderOption:(b,O)=>{const{code:Y,label:J,phone:ce}=$.filter(Ue=>Ue.label===O)[0];return J?D.createElement("li",{...b,key:J},J):null},onChange:(b,O)=>E(O)})]}),n==="Others"&&o.jsx(N,{sx:{mt:3},name:"other_caterogy",label:"Other Category"}),o.jsxs(ie,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},sx:{mt:3},children:[o.jsxs(ie,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{sm:"repeat(2, 1fr)"},children:[o.jsx(we,{name:"start_time",label:"Start Time",options:St,getOptionLabel:b=>b.label,isOptionEqualToValue:(b,O)=>b.label===O.value,renderOption:(b,O)=>D.createElement("li",{...b,key:O.label},O.label)}),o.jsx(we,{name:"end_time",label:"End Time",options:St,getOptionLabel:b=>b.label,isOptionEqualToValue:(b,O)=>b.label===O.value,renderOption:(b,O)=>D.createElement("li",{...b,key:O.label},O.label)})]}),o.jsx(N,{name:"website_link",label:"Website Link"})]}),o.jsxs(U,{spacing:3,alignItems:"flex-end",sx:{mt:3},children:[o.jsx(N,{name:"short_description",rows:1,inputProps:{maxLength:300},label:"Short Description"}),o.jsx(N,{name:"description",multiline:!0,rows:4,label:"Description"}),o.jsx(le,{type:"submit",variant:"contained",loading:u,children:"Save Changes"})]})]})})]})}),o.jsx(Xt,{open:m,onClose:j,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:o.jsxs(ie,{sx:Ta,children:[o.jsx(je,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Upload Image"}),o.jsx(ie,{sx:{width:"100%",aspectRatio:S==="Logo"?"1/1":"16/9",mx:"auto",mt:2},children:S==="Logo"?o.jsx("div",{className:"round-crop",style:{width:"100%",height:"100%"},children:o.jsx(mt,{ref:V,src:g,aspectRatio:1,guides:!0,dragMode:"move"})}):o.jsx(mt,{ref:V,src:C,aspectRatio:16/9,guides:!0,dragMode:"move"})}),o.jsxs(U,{direction:"row",justifyContent:"end",mt:2,gap:2,children:[o.jsx(qt,{type:"button",variant:"outoline",color:"secondary",onClick:j,children:"Cancel"}),o.jsx(le,{onClick:z,color:"inherit",type:"submit",variant:"contained",loading:P,children:"Upload"})]})]})})]})}const Oa=[{value:"general",label:"General",icon:o.jsx(X,{icon:"solar:user-id-bold",width:24})},{value:"business",label:"Business",icon:o.jsx(X,{icon:"solar:user-id-bold",width:24})},{value:"bank",label:"Bank Detail",icon:o.jsx(X,{icon:"solar:user-id-bold",width:24})},{value:"Address",label:"Address",icon:o.jsx(X,{icon:"solar:bill-list-bold",width:24})},{value:"social",label:"Social links",icon:o.jsx(X,{icon:"solar:share-bold",width:24})},{value:"gallery",label:"Gallery",icon:o.jsx(X,{icon:"solar:gallery-wide-bold",width:24})},{value:"security",label:"Security",icon:o.jsx(X,{icon:"ic:round-vpn-key",width:22})},{value:"Shipping",label:"Shipping",icon:o.jsx(X,{icon:"solar:bill-list-bold",width:22})}];function Ma(){var h;const a=yi(),[e,i]=D.useState("general"),t=D.useCallback((p,d)=>{i(d)},[]),{user:n}=fe(),r=n==null?void 0:n.Business_Profile[0],s=n==null?void 0:n.Bank_Detail[0];return o.jsxs(wi,{maxWidth:a.themeStretch?!1:"lg",children:[o.jsx(ji,{heading:"Manage Business",links:[{name:"Dashboard",href:Ct.findBusiness},{name:"Manage Business",href:Ct.manageBusiness}],sx:{mb:{xs:3,md:5}}}),n!=null&&n.is_premium?o.jsxs(o.Fragment,{children:[o.jsx(Ci,{value:e,onChange:t,sx:{mb:{xs:3,md:5}},children:Oa.map(p=>o.jsx(Si,{label:p.label,icon:p.icon,value:p.value},p.value))}),e==="general"&&o.jsx(Ea,{}),e==="business"&&o.jsx(Da,{}),e==="bank"&&o.jsx(Ni,{Bank_Detail:s}),e==="Address"&&o.jsx(Di,{personalAdress:n==null?void 0:n.addresses[0],businessAddress:(h=n==null?void 0:n.Business_Profile[0])==null?void 0:h.addresses}),e==="social"&&o.jsx(li,{socialLinks:r==null?void 0:r.Social_Link}),e==="security"&&o.jsx(Ai,{}),e==="Shipping"&&o.jsx(_a,{}),e==="gallery"&&o.jsx(Ti,{businessProfile:r,isManageBusiness:!0})]}):o.jsx(Ei,{})]})}function Pa(){return o.jsxs(o.Fragment,{children:[o.jsx(_i,{children:o.jsx("title",{children:" Manage business | Return 2 Success"})}),o.jsx(Ma,{})]})}export{Pa as default};
